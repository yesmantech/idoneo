import{j as e}from"./framer-CcO5Kjcw.js";import{b as j,u as b,r as l,L as g}from"./router-ClfHAwMg.js";import{getContestBySlug as N}from"./data-c4Qa0FPX.js";import{u as v,s as w}from"./index-BcNl-kiB.js";import{l as y,m as F,n as C,o as _,p as k,q as z}from"./icons-Dvxa2Qho.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function E(){var d;const{category:m,role:h,contestSlug:t}=j(),i=b(),{user:r}=v(),[a,p]=l.useState(null),[u,c]=l.useState(!0),[o,f]=l.useState([]);return l.useEffect(()=>{if(!t)return;async function s(){c(!0);const n=await N(t||"");if(p(n),n&&r){const{data:x}=await w.from("quiz_attempts").select("*").eq("quiz_id",n.id).eq("user_id",r.id).order("created_at",{ascending:!1}).limit(5);x&&f(x)}c(!1)}s()},[t,r]),u?e.jsx("div",{className:"min-h-screen bg-[#F8FAFC] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})}):a?e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] pb-20 font-sans text-slate-900",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-[#F8FAFC]/90 backdrop-blur-md px-4 py-4 flex items-center gap-1",children:e.jsxs("button",{onClick:()=>i(-1),className:"p-1 -ml-2 rounded-full hover:bg-slate-200/50 transition-colors flex items-center text-slate-500",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[15px] font-medium uppercase tracking-wide ml-1",children:((d=a.roleSlug)==null?void 0:d.replace(/-/g," "))||"Indietro"})]})}),e.jsxs("div",{className:"px-5 space-y-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-[#0F172A] tracking-tight leading-tight",children:a.title})}),e.jsx("div",{className:"bg-white rounded-[20px] p-5 shadow-[0_2px_15px_rgba(0,0,0,0.03)] border border-slate-100/50",children:e.jsx("p",{className:`${a.description?"text-slate-600":"text-slate-400 italic"} text-[15px] leading-relaxed`,children:a.description||"Nessuna descrizione inserita."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-[24px] p-6 shadow-[0_4px_20px_rgba(0,0,0,0.04)] border border-slate-100 transition-transform active:scale-[0.99]",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-50 flex items-center justify-center flex-shrink-0",children:e.jsx(F,{className:"w-7 h-7 text-cyan-500",strokeWidth:1.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Simulazione Ufficiale"}),e.jsx("p",{className:"text-[14px] text-slate-500 leading-snug",children:"Replica l'esame reale con timer e pesi ufficiali."})]})]}),e.jsxs("button",{onClick:()=>i(`/quiz/${t}/official`),className:"w-full bg-[#00B1FF] hover:bg-[#0099DD] text-white font-bold text-[16px] py-4 rounded-[18px] shadow-lg shadow-cyan-200/50 transition-all flex items-center justify-center gap-2",children:["Avvia Simulazione ",e.jsx("span",{className:"text-lg",children:"→"})]})]}),e.jsxs("div",{className:"bg-white rounded-[24px] p-6 shadow-[0_4px_20px_rgba(0,0,0,0.04)] border border-slate-100 transition-transform active:scale-[0.99]",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-50 flex items-center justify-center flex-shrink-0",children:e.jsx(C,{className:"w-7 h-7 text-purple-500",strokeWidth:1.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Prova Personalizzata"}),e.jsx("p",{className:"text-[14px] text-slate-500 leading-snug",children:"Allenati su argomenti specifici senza limiti di tempo."})]})]}),e.jsxs("button",{onClick:()=>i(`/concorsi/${m}/${h}/${t}/custom`),className:"w-full bg-[#A855F7] hover:bg-[#9333EA] text-white font-bold text-[16px] py-4 rounded-[18px] shadow-lg shadow-purple-200/50 transition-all flex items-center justify-center gap-2",children:["Configura Prova ",e.jsx("span",{className:"text-lg",children:"→"})]})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{className:"w-5 h-5 text-slate-400"}),e.jsx("h3",{className:"text-[17px] font-bold text-slate-900",children:"Registro Esercitazioni"})]}),e.jsx("div",{className:"bg-white rounded-[24px] border border-slate-100 shadow-[0_2px_15px_rgba(0,0,0,0.03)] overflow-hidden min-h-[160px] flex flex-col justify-center",children:o.length>0?e.jsx("div",{className:"divide-y divide-slate-50",children:o.map(s=>e.jsxs(g,{to:`/quiz/results/${s.id}`,className:"flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.score>=18?"bg-emerald-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[15px] font-bold text-slate-900",children:s.score>=18?"Idoneo":"Non Idoneo"}),e.jsxs("div",{className:"text-[13px] text-slate-400",children:[new Date(s.created_at).toLocaleDateString("it-IT")," · ",s.score,"/30"]})]})]}),e.jsx("span",{className:"text-slate-300 text-lg",children:"›"})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"mb-3 opacity-60",children:e.jsx(k,{className:"w-8 h-8 text-[#C4B598]",strokeWidth:1.5})}),e.jsx("p",{className:"text-[14px] text-slate-400 font-medium px-4",children:"Non hai ancora effettuato esercitazioni per questo ruolo."})]})})]}),e.jsxs("div",{className:"pt-2 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(z,{className:"w-5 h-5 text-slate-400"}),e.jsx("h3",{className:"text-[17px] font-bold text-slate-900",children:"Materiali & Strumenti"})]}),e.jsx("div",{className:"bg-white rounded-[20px] p-5 border border-slate-100 shadow-sm opacity-50",children:e.jsx("p",{className:"text-sm text-slate-400",children:"Nessun materiale disponibile al momento."})})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col items-center justify-center p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Concorso non trovato"}),e.jsx("button",{onClick:()=>i(-1),className:"text-[#00B1FF] font-medium hover:underline",children:"← Torna indietro"})]})}export{E as default};
