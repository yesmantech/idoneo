import{j as e,A as D,m as _}from"./framer-BdaCTGm4.js";import{r as c,R as Q}from"./router-ClfHAwMg.js";import{c as le,u as oe,a as ie,l as N,s as ne}from"./index-DBMi1b3R.js";import{m as $,ax as de,X as ce,w as M,aJ as W,o as U,R as H,S as Y,a as Z,a1 as xe,I as me,T as pe,Z as J,a3 as q}from"./icons-DIoLbN6D.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function ue({currentSelection:a,onSelect:l,activeQuizzes:r,otherQuizzes:t}){var I;const[s,o]=c.useState(!1),[n,m]=c.useState(""),p=c.useRef(null);c.useEffect(()=>{function i(g){p.current&&!p.current.contains(g.target)&&o(!1)}return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const u=i=>{l(i),o(!1),m("")},b=i=>{var L;const g=i.roleTitle||((L=i.role)==null?void 0:L.title)||"";return(i.title+" "+g).toLowerCase()},d=r.filter(i=>b(i).includes(n.toLowerCase())),f=t.filter(i=>b(i).includes(n.toLowerCase()));let k="Gold League",T=e.jsx("span",{className:"text-brand-orange text-2xl",children:"ðŸ†"});if(a!=="xp"){const i=[...r,...t].find(g=>g.id===a);i&&(k=i.roleTitle||((I=i.role)==null?void 0:I.title)||i.title,T=e.jsx("span",{className:"text-brand-cyan text-2xl",children:"ðŸ“Š"}))}return e.jsxs("div",{className:"relative inline-block",ref:p,children:[e.jsxs("button",{onClick:()=>o(!s),className:`flex items-center gap-3 px-5 py-3 bg-[var(--card)] rounded-[20px] shadow-[0_4px_12px_rgba(0,0,0,0.1)] 
                           border transition-all duration-300 active:scale-[0.98]
                           ${s?"border-[#00B1FF]/50 ring-4 ring-[#00B1FF]/10":"border-[var(--card-border)] hover:border-slate-300 dark:hover:border-slate-600 hover:shadow-lg"}`,children:[e.jsx("span",{className:"scale-110",children:T}),e.jsx("span",{className:"text-[17px] font-bold text-[var(--foreground)] tracking-tight min-w-[100px] text-center",children:k}),e.jsx("svg",{className:`w-4 h-4 text-[var(--foreground)] opacity-40 transition-transform duration-300 ${s?"rotate-180 text-[#00B1FF] !opacity-100":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),s&&e.jsxs("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-3 w-[320px] bg-[var(--card)] rounded-[24px] 
                                shadow-2xl border border-[var(--card-border)] overflow-hidden z-[100] animate-in fade-in zoom-in-95 duration-200`,children:[e.jsx("div",{className:"p-3 border-b border-[var(--card-border)] opacity-80",children:e.jsx("input",{type:"text",placeholder:"Cerca concorso...",className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-[#00B1FF]/20 transition-all font-medium text-[var(--foreground)] placeholder:text-[var(--foreground)] placeholder:opacity-40",value:n,onChange:i=>m(i.target.value),autoFocus:!0})}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 p-2 space-y-2",children:[n===""&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>u("xp"),className:`w-full text-left px-4 py-3.5 rounded-[16px] flex items-center gap-3 transition-all ${a==="xp"?"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 shadow-sm":"hover:bg-slate-50 dark:hover:bg-slate-800 text-[var(--foreground)] opacity-70 hover:opacity-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg shadow-sm border border-black/5 ${a==="xp"?"bg-amber-100 dark:bg-amber-800 text-amber-600":"bg-white dark:bg-slate-700 text-slate-400"}`,children:"ðŸ†"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-[15px]",children:"Gold League"}),e.jsx("div",{className:"text-[11px] uppercase font-bold tracking-wider opacity-60",children:"Classifica Globale"})]}),a==="xp"&&e.jsx(K,{color:"text-amber-500"})]})}),n===""&&e.jsx("div",{className:"h-px bg-slate-100 mx-2"}),d.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-[11px] uppercase font-extrabold text-[var(--foreground)] opacity-40 tracking-widest leading-none mt-2",children:["I Tuoi Concorsi (",d.length,")"]}),d.map(i=>e.jsx(G,{quiz:i,isSelected:a===i.id,onClick:()=>u(i.id)},i.id))]}),e.jsxs("div",{children:[f.length>0&&e.jsxs("div",{className:"px-4 py-2 text-[11px] uppercase font-extrabold text-[var(--foreground)] opacity-40 tracking-widest mt-2",children:["Tutti i Concorsi (",f.length,")"]}),f.map(i=>e.jsx(G,{quiz:i,isSelected:a===i.id,onClick:()=>u(i.id)},i.id)),d.length===0&&f.length===0&&e.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Nessun concorso trovato."})]})]})]})]})}function G({quiz:a,isSelected:l,onClick:r}){var s;const t=a.roleTitle||((s=a.role)==null?void 0:s.title);return e.jsxs("button",{onClick:r,className:`w-full text-left px-4 py-3 rounded-[16px] flex items-center gap-3 transition-all mb-1 ${l?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 shadow-sm":"bg-transparent text-[var(--foreground)] opacity-70 hover:opacity-100 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-xs font-black border border-black/5 dark:border-white/5 shadow-sm ${l?"bg-cyan-100 dark:bg-cyan-800 text-cyan-600":"bg-white dark:bg-slate-700 text-slate-400"}`,children:(t||a.title).substring(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-[14px] truncate",children:t||a.title}),t&&t!==a.title&&e.jsx("div",{className:"text-[11px] opacity-50 truncate",children:a.title})]}),l&&e.jsx(K,{color:"text-cyan-500"})]})}function K({color:a="text-amber-500"}){return e.jsx("svg",{className:`w-5 h-5 ${a}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}function be({data:a,loading:l,theme:r,metricLabel:t,emptyMessage:s,currentUserEntry:o}){const n=a.slice(0,3),m=a.slice(3),p=a.some(d=>d.isCurrentUser),u=!!o&&!p,b=r==="gold";return l?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-end justify-center gap-4 w-full",children:[e.jsx("div",{className:"w-20 h-24 bg-slate-100 dark:bg-slate-800 rounded-t-2xl"}),e.jsx("div",{className:"w-24 h-32 bg-slate-100 dark:bg-slate-800 rounded-t-2xl"}),e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-t-2xl"})]}),e.jsx("div",{className:"space-y-3 w-full",children:[1,2,3,4].map(d=>e.jsx("div",{className:"w-full h-14 bg-slate-100 dark:bg-slate-800 rounded-xl"},d))})]}):a.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-[var(--foreground)] opacity-40 p-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center text-4xl mb-6 shadow-sm border border-[var(--card-border)] ${b?"bg-amber-50 dark:bg-amber-900/30 text-amber-500":"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-500"}`,children:b?e.jsx($,{className:"w-10 h-10"}):e.jsx("span",{className:"text-3xl",children:"ðŸ“Š"})}),e.jsx("h3",{className:"font-bold text-xl text-[var(--foreground)] mb-2",children:"Classifica Vuota"}),e.jsx("p",{className:"text-center text-[var(--foreground)] opacity-50 max-w-[200px] leading-relaxed",children:s||"Ancora nessun partecipante. Sii il primo a scalare la vetta!"})]}):e.jsxs("div",{className:"flex flex-col h-full bg-[var(--card)]",children:[e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide relative bg-[var(--card)]",children:e.jsxs("div",{className:"px-4 pb-20 pt-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx(he,{top3:n,metricLabel:t})}),e.jsx("div",{className:"space-y-1",children:m.map(d=>e.jsx(V,{entry:d,metricLabel:t},d.rank))})]})}),u&&o&&e.jsx("div",{className:"flex-none p-4 pb-6 bg-[var(--card)] border-t border-[var(--card-border)] shadow-[0_-8px_30px_rgb(0,0,0,0.1)] z-50",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"text-[10px] font-black text-[var(--foreground)] opacity-40 uppercase tracking-widest mb-2 text-center",children:"La tua posizione attuale"}),e.jsx(V,{entry:o,metricLabel:t})]})})]})}const he=({top3:a,metricLabel:l})=>{const[r,t,s]=a;return e.jsxs("div",{className:"flex items-end justify-center gap-2 sm:gap-4 min-h-[220px] px-2 pt-16 overflow-visible",children:[e.jsx("div",{className:"flex flex-col items-center gap-3 w-1/3 max-w-[110px] order-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-20 h-20 rounded-[28px] border-[3px] border-slate-200 dark:border-slate-700 bg-[var(--card)] shadow-[0_4px_12px_rgba(0,0,0,0.1)] p-0.5 overflow-hidden z-10 relative",children:e.jsx("img",{src:t.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.user.nickname}`,alt:t.user.nickname,className:"w-full h-full object-cover rounded-[20px]"})}),e.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-[11px] font-black px-2.5 py-0.5 rounded-full border border-[var(--card)] shadow-sm z-20",children:"2"})]}),e.jsxs("div",{className:"text-center w-full mt-1",children:[e.jsx("div",{className:"font-bold text-[13px] text-[var(--foreground)] truncate px-1",children:t.user.nickname}),e.jsxs("div",{className:"text-[11px] font-bold text-[var(--foreground)] opacity-50",children:[Math.round(t.score)," XP"]})]})]})}),e.jsx("div",{className:"flex flex-col items-center gap-3 w-1/3 max-w-[130px] -mt-14 order-2 z-20 overflow-visible",children:r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group scale-110",children:[e.jsx("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 pointer-events-none z-50",children:e.jsx(de,{className:"w-10 h-10 text-amber-400 fill-amber-400 drop-shadow-md animate-bounce-subtle"})}),e.jsx("div",{className:"w-24 h-24 rounded-[32px] border-[3px] border-amber-300 dark:border-amber-500/50 bg-[var(--card)] shadow-[0_8px_24px_rgba(251,191,36,0.3)] p-0.5 overflow-hidden z-10 relative ring-4 ring-amber-50 dark:ring-amber-900/20",children:e.jsx("img",{src:r.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.user.nickname}`,alt:r.user.nickname,className:"w-full h-full object-cover rounded-[24px]"})}),e.jsx("div",{className:"absolute -bottom-3.5 left-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-400 to-amber-500 text-white text-[12px] font-black px-4 py-0.5 rounded-full border-2 border-[var(--card)] shadow-md z-20 flex items-center gap-1",children:e.jsx("span",{children:"1"})})]}),e.jsxs("div",{className:"text-center w-full mt-3",children:[e.jsx("div",{className:"font-black text-[15px] text-[var(--foreground)] truncate px-1",children:r.user.nickname}),e.jsxs("div",{className:"text-[13px] font-bold text-amber-500",children:[r.score," ",e.jsx("span",{className:"text-[10px] opacity-75",children:l})]})]})]})}),e.jsx("div",{className:"flex flex-col items-center gap-3 w-1/3 max-w-[110px] order-3",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-20 h-20 rounded-[28px] border-[3px] border-orange-200 dark:border-orange-800/50 bg-[var(--card)] shadow-[0_4px_12px_rgba(0,0,0,0.1)] p-0.5 overflow-hidden z-10 relative",children:e.jsx("img",{src:s.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.user.nickname}`,alt:s.user.nickname,className:"w-full h-full object-cover rounded-[20px]"})}),e.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300 text-[11px] font-black px-2.5 py-0.5 rounded-full border border-[var(--card)] shadow-sm z-20",children:"3"})]}),e.jsxs("div",{className:"text-center w-full mt-1",children:[e.jsx("div",{className:"font-bold text-[13px] text-[var(--foreground)] truncate px-1",children:s.user.nickname}),e.jsxs("div",{className:"text-[11px] font-bold text-[var(--foreground)] opacity-50",children:[Math.round(s.score)," XP"]})]})]})})]})},V=({entry:a,metricLabel:l})=>{const[r,t]=Q.useState(!1),s=!!a.breakdown;return e.jsxs("div",{onClick:()=>s&&t(!r),className:`group flex flex-col p-3.5 rounded-[24px] transition-all duration-200 cursor-pointer ${a.isCurrentUser?"bg-sky-50 dark:bg-sky-900/30 border border-sky-100 dark:border-sky-800 shadow-sm scale-[1.01] sticky z-30 -mx-2 px-5":"bg-transparent border border-transparent hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[e.jsx("span",{className:"font-bold w-6 text-center text-[13px] text-[var(--foreground)] opacity-40 font-mono",children:a.rank}),e.jsx("div",{className:"w-10 h-10 rounded-[16px] bg-slate-100 dark:bg-slate-800 overflow-hidden flex-shrink-0 shadow-sm border border-[var(--card-border)]",children:e.jsx("img",{src:a.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.user.nickname}`,alt:"Avatar",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[e.jsx("div",{className:"font-bold text-[15px] truncate text-[var(--foreground)] flex items-center gap-2",children:a.user.nickname}),a.isCurrentUser&&e.jsx("span",{className:"text-[10px] bg-[#00B1FF] text-white px-2 py-0.5 rounded-full font-bold tracking-wide shadow-sm shadow-blue-500/20",children:"YOU"})]}),e.jsx("div",{className:"font-bold text-[15px] text-[var(--foreground)] tracking-tight text-right",children:e.jsxs("div",{children:[a.score," ",e.jsx("span",{className:"text-[11px] font-bold text-[var(--foreground)] opacity-40",children:l})]})})]}),r&&a.breakdown&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--card-border)] grid grid-cols-4 gap-2 text-center animate-in slide-in-from-top-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-[var(--foreground)] opacity-40 uppercase font-bold tracking-wider",children:"Volume"}),e.jsxs("span",{className:"text-xs font-bold text-[var(--foreground)]",children:[Math.round(a.breakdown.volume*100),"%"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-[var(--foreground)] opacity-40 uppercase font-bold tracking-wider",children:"Accur."}),e.jsxs("span",{className:"text-xs font-bold text-[var(--foreground)]",children:[Math.round(a.breakdown.accuracy*100),"%"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-[var(--foreground)] opacity-40 uppercase font-bold tracking-wider",children:"Recent"}),e.jsxs("span",{className:"text-xs font-bold text-[var(--foreground)]",children:[Math.round(a.breakdown.recency*100),"%"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-[var(--foreground)] opacity-40 uppercase font-bold tracking-wider",children:"Cover"}),e.jsxs("span",{className:"text-xs font-bold text-[var(--foreground)]",children:[Math.round(a.breakdown.coverage*100),"%"]})]}),a.breakdown.reliability<1&&e.jsx("div",{className:"col-span-4 mt-2 text-[10px] text-amber-500 bg-amber-50 dark:bg-amber-900/30 p-1.5 rounded-lg text-center font-medium",children:"âš ï¸ Low Reliability (Need more unique questions)"})]})]})};function fe({data:a,loading:l,theme:r,metricLabel:t,emptyMessage:s}){const o=a.slice(0,3),n=a.slice(3),m=r==="gold",p=m?"text-brand-orange":"text-brand-cyan",u=m?"bg-brand-orange/10":"bg-brand-cyan/10";return l?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 space-y-4 animate-pulse",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-200 dark:bg-slate-700 rounded-full"}),e.jsx("div",{className:"w-32 h-6 bg-slate-200 dark:bg-slate-700 rounded-lg"}),e.jsx("div",{className:"w-full max-w-md h-12 bg-slate-200 dark:bg-slate-700 rounded-xl"}),e.jsx("div",{className:"w-full max-w-md h-12 bg-slate-200 dark:bg-slate-700 rounded-xl"})]}):a.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-tertiary p-8",children:[e.jsx("div",{className:`w-16 h-16 rounded-squircle flex items-center justify-center text-3xl mb-4 ${u} ${p}`,children:m?"ðŸ†":"ðŸ“Š"}),e.jsx("p",{className:"font-bold text-lg text-text-primary",children:"Nessun dato disponibile"}),e.jsx("p",{className:"text-sm mt-2",children:s||"La classifica Ã¨ vuota. Partecipa per primo!"})]}):e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx(ge,{top3:o,theme:r,metricLabel:t}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-3 scrollbar-thin scrollbar-thumb-gray-200",children:n.map(b=>e.jsx(ve,{entry:b,theme:r,metricLabel:t},b.rank))})]})}const ge=({top3:a,theme:l,metricLabel:r})=>{const[t,s,o]=a,n=l==="gold",m=n?"bg-brand-orange":"bg-brand-cyan";return e.jsxs("div",{className:"flex items-end justify-center gap-4 mb-4 min-h-[220px] pb-6 px-4 pt-24 overflow-visible",children:[e.jsx("div",{className:"flex flex-col items-center gap-2 w-1/3 max-w-[100px]",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"w-16 h-16 rounded-squircle border-4 border-white shadow-soft overflow-hidden bg-white",children:e.jsx("img",{src:s.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.user.nickname}`,alt:s.user.nickname,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-text-secondary text-white text-[10px] font-black px-2 py-0.5 rounded-pill shadow-sm",children:"2nd"})]}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"font-bold text-sm text-text-primary truncate",children:s.user.nickname}),e.jsx("div",{className:"text-xs font-black text-text-tertiary",children:Math.round(s.score)})]})]})}),e.jsx("div",{className:"flex flex-col items-center gap-2 w-1/3 max-w-[120px] -mt-10 z-10",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 text-3xl animate-bounce",children:"ðŸ‘‘"}),e.jsx("div",{className:`w-24 h-24 rounded-squircle border-4 ${n?"border-brand-orange":"border-brand-cyan"} overflow-hidden bg-white shadow-card`,children:e.jsx("img",{src:t.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.user.nickname}`,alt:t.user.nickname,className:"w-full h-full object-cover"})}),e.jsx("div",{className:`absolute -bottom-3 left-1/2 -translate-x-1/2 ${m} text-white text-sm font-black px-3 py-1 rounded-pill shadow-lg border-2 border-white`,children:"1st"})]}),e.jsxs("div",{className:"text-center w-full mt-2",children:[e.jsx("div",{className:"font-black text-base text-text-primary truncate",children:t.user.nickname}),e.jsxs("div",{className:`text-sm font-black ${n?"text-brand-orange":"text-brand-cyan"}`,children:[t.score," ",e.jsx("span",{className:"text-[10px] uppercase opacity-70",children:r})]})]})]})}),e.jsx("div",{className:"flex flex-col items-center gap-2 w-1/3 max-w-[100px]",children:o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"w-16 h-16 rounded-squircle border-4 border-white shadow-soft overflow-hidden bg-white",children:e.jsx("img",{src:o.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.user.nickname}`,alt:o.user.nickname,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-text-tertiary text-white text-[10px] font-black px-2 py-0.5 rounded-pill shadow-sm",children:"3rd"})]}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"font-bold text-sm text-text-primary truncate",children:o.user.nickname}),e.jsx("div",{className:"text-xs font-black text-text-tertiary",children:Math.round(o.score)})]})]})})]})},ve=({entry:a,theme:l,metricLabel:r})=>{const t=l==="gold",s=t?"bg-brand-orange/5 border-brand-orange/20 shadow-soft":"bg-brand-cyan/5 border-brand-cyan/20 shadow-soft";return e.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl border transition-all duration-200 ${a.isCurrentUser?`border ${s} transform scale-[1.01]`:"bg-[var(--card)] border-transparent hover:bg-slate-100 dark:hover:bg-slate-700 hover:scale-[1.01] hover:shadow-sm"}`,children:[e.jsx("span",{className:"font-black w-6 text-center text-sm text-text-tertiary",children:a.rank}),e.jsx("div",{className:"w-10 h-10 rounded-squircle bg-slate-100 dark:bg-slate-700 overflow-hidden flex-shrink-0 shadow-sm border border-transparent",children:e.jsx("img",{src:a.user.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.user.nickname}`,alt:"Avatar",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"font-bold text-sm truncate text-text-primary flex items-center gap-2",children:[a.user.nickname," ",a.isCurrentUser&&e.jsx("span",{className:"text-[9px] bg-brand-cyan text-white px-1.5 py-0.5 rounded-pill font-black tracking-wide",children:"YOU"})]})}),e.jsxs("div",{className:`font-black text-sm ${t?"text-brand-orange":"text-brand-cyan"}`,children:[a.score," ",e.jsx("span",{className:"text-[10px] uppercase font-bold opacity-50 text-text-tertiary",children:r})]})]})},ee=Q.forwardRef(({className:a,variant:l="primary",fullWidth:r=!1,isLoading:t,icon:s,children:o,disabled:n,...m},p)=>{const u="h-[56px] rounded-pill font-bold text-[16px] inline-flex items-center justify-center gap-2 transition-all duration-300 ease-ios disabled:opacity-80 disabled:cursor-not-allowed",b={primary:"bg-brand-cyan text-white shadow-[0_4px_12px_rgba(6,214,211,0.25)] hover:bg-[#05bfbc] hover:scale-[1.02] hover:shadow-[0_6px_16px_rgba(6,214,211,0.35)] active:scale-[0.98]",secondary:"bg-canvas-light text-text-primary hover:bg-[#E5E7EB] hover:scale-[1.02] active:scale-[0.98]",ghost:"bg-transparent text-text-secondary hover:text-brand-blue hover:bg-canvas-light/50"},d=r?"w-full":"w-auto px-8";return e.jsx("button",{ref:p,className:le(u,b[l],d,a),disabled:t||n,...m,children:t?e.jsx("div",{className:"w-6 h-6 border-[3px] border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[s&&e.jsx("span",{className:"flex-shrink-0",children:s}),o]})})});ee.displayName="Button";function je({isOpen:a,onClose:l,type:r,onMoreInfo:t}){if(!a)return null;const s=r==="prep";return e.jsx(D,{children:a&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center sm:p-4",children:[e.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md"}),e.jsxs(_.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-md bg-[var(--card)] rounded-t-[32px] sm:rounded-[32px] overflow-hidden shadow-2xl max-h-[90vh] flex flex-col border border-[var(--card-border)]",children:[e.jsx("button",{onClick:l,className:"absolute top-4 right-4 p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-[var(--foreground)] opacity-50 hover:opacity-100 z-10",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6 pt-10 pb-8 overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-[28px] flex items-center justify-center mb-6 shadow-sm ${s?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-500":"bg-amber-50 dark:bg-amber-900/30 text-amber-500"}`,children:s?e.jsx(M,{className:"w-10 h-10"}):e.jsx($,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-2xl font-black text-[var(--foreground)] leading-tight mb-3",children:s?"Il tuo Punteggio":"XP e Classifiche"}),e.jsx("p",{className:"text-[var(--foreground)] opacity-50 font-medium leading-relaxed px-2",children:s?"Il punteggio da 0 a 100 indica quanto sei pronto per questo concorso, basandosi sulle tue simulazioni.":"Gli XP misurano quanto ti alleni su Idoneo e servono per scalare le classifiche globali."})]}),e.jsx("div",{className:"space-y-4 mb-8",children:s?e.jsxs(e.Fragment,{children:[e.jsx(w,{icon:e.jsx(W,{className:"w-5 h-5"}),title:"Volume di quiz",text:"PiÃ¹ quiz diversi svolgi, piÃ¹ il punteggio Ã¨ affidabile.",color:"cyan"}),e.jsx(w,{icon:e.jsx(M,{className:"w-5 h-5"}),title:"Accuracy",text:"La percentuale di risposte corrette influenza il voto.",color:"cyan"}),e.jsx(w,{icon:e.jsx(U,{className:"w-5 h-5"}),title:"Recenza",text:"I risultati recenti valgono piÃ¹ di quelli vecchi.",color:"cyan"}),e.jsx(w,{icon:e.jsx(H,{className:"w-5 h-5"}),title:"Copertura",text:"Premia chi si allena su tutta la banca dati.",color:"cyan"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{icon:e.jsx(Y,{className:"w-5 h-5"}),title:"XP per risposta",text:"Ogni risposta corretta ti dÃ  1 XP.",color:"amber"}),e.jsx(w,{icon:e.jsx($,{className:"w-5 h-5"}),title:"Classifica 14 giorni",text:"La classifica si azzera ogni due settimane.",color:"amber"}),e.jsx(w,{icon:e.jsx(Z,{className:"w-5 h-5"}),title:"XP Totali",text:"I tuoi XP totali restano sempre nel profilo.",color:"amber"}),e.jsx(w,{icon:e.jsx(M,{className:"w-5 h-5"}),title:"Allenamento",text:"Gli XP misurano l'impegno, non la preparazione.",color:"amber"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{fullWidth:!0,className:"bg-[#00B1FF] hover:bg-[#0099e6] text-white shadow-lg shadow-[#00B1FF]/30 border-none",onClick:l,children:"Ho capito"}),e.jsx("button",{onClick:t,className:"w-full py-2 text-sm font-bold text-[var(--foreground)] opacity-40 hover:opacity-100 transition-colors",children:"Voglio saperne di piÃ¹ â†’"})]})]})]})]})})}function w({icon:a,title:l,text:r,color:t}){const s=t==="cyan"?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-500":"bg-amber-50 dark:bg-amber-900/30 text-amber-500";return e.jsxs("div",{className:"flex gap-4 p-4 rounded-2xl bg-slate-50/50 dark:bg-slate-800/50 border border-slate-100/50 dark:border-slate-700/50",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex-shrink-0 flex items-center justify-center ${s}`,children:a}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-[var(--foreground)] text-[15px] mb-0.5",children:l}),e.jsx("p",{className:"text-[13px] text-[var(--foreground)] opacity-50 leading-snug",children:r})]})]})}function we({onBack:a,initialTab:l="prep"}){const[r,t]=c.useState(l);return e.jsxs("div",{className:"fixed inset-0 z-[60] bg-[var(--background)] flex flex-col overflow-hidden animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"flex-none px-4 pt-safe pb-4 flex items-center justify-between border-b border-[var(--card-border)] bg-[var(--background)]/90 backdrop-blur-md sticky top-0 z-10 transition-colors",children:[e.jsx("button",{onClick:a,className:"p-3 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-[var(--foreground)] opacity-40 hover:opacity-100 transition-colors",children:e.jsx(xe,{className:"w-6 h-6"})}),e.jsx("h1",{className:"font-black text-lg text-[var(--foreground)]",children:"Come funziona"}),e.jsx("div",{className:"w-12"})," "]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-[var(--background)]",children:e.jsxs("div",{className:"p-5 max-w-lg mx-auto pb-20",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-[14px] mb-8 relative border border-slate-200 dark:border-slate-700",children:[e.jsx(_.div,{layoutId:"activeTab",className:"absolute inset-y-1 bg-white dark:bg-slate-700 rounded-[10px] shadow-sm z-0",initial:!1,animate:{left:r==="prep"?"4px":"50%",width:"calc(50% - 4px)",x:"0%"},transition:{type:"spring",stiffness:300,damping:30}}),e.jsx("button",{onClick:()=>t("prep"),className:`flex-1 relative z-10 py-2.5 text-[13px] font-bold text-center transition-colors ${r==="prep"?"text-slate-900 dark:text-white":"text-slate-400"}`,children:"Punteggio"}),e.jsx("button",{onClick:()=>t("xp"),className:`flex-1 relative z-10 py-2.5 text-[13px] font-bold text-center transition-colors ${r==="xp"?"text-slate-900 dark:text-white":"text-slate-400"}`,children:"XP e Classifiche"})]}),e.jsx(D,{mode:"wait",children:r==="prep"?e.jsx(Ne,{},"prep"):e.jsx(ye,{},"xp")})]})})]})}function Ne(){return e.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-cyan-50 dark:bg-cyan-900/30 rounded-2xl flex items-center justify-center mx-auto text-cyan-500 mb-2",children:e.jsx(M,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-2xl font-black text-[var(--foreground)]",children:"Punteggio di Preparazione"}),e.jsx("p",{className:"text-[var(--foreground)] opacity-50 font-medium leading-relaxed",children:"Misuriamo la tua preparazione da 0 a 100 basandoci sui quiz svolti, la qualitÃ  delle risposte e la costanza."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider pl-1",children:"I 4 Fattori"}),e.jsx(y,{icon:e.jsx(W,{className:"w-5 h-5"}),title:"Volume di Quiz",subtitle:"Il fattore principale (45%)",text:"PiÃ¹ domande diverse affronti, piÃ¹ il sistema ha dati per valutarti. I punteggi alti richiedono un volume consistente.",color:"cyan"}),e.jsx(y,{icon:e.jsx(me,{className:"w-5 h-5"}),title:"Accuracy",subtitle:"Precisione (30%)",text:"Ãˆ la tua percentuale di risposte corrette. Il sistema pesa maggiormente le risposte date recentemente.",color:"emerald"}),e.jsx(y,{icon:e.jsx(U,{className:"w-5 h-5"}),title:"Recenza",subtitle:"Costanza (15%)",text:"Se non ti alleni da tempo, il punteggio scende. Per mantenerlo alto, devi esercitarti con regolaritÃ .",color:"amber"}),e.jsx(y,{icon:e.jsx(H,{className:"w-5 h-5"}),title:"Copertura",subtitle:"ProfonditÃ  (10%)",text:"Premia chi esplora tutta la banca dati invece di ripetere sempre le stesse domande.",color:"purple"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-5 border border-slate-100 dark:border-slate-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[var(--foreground)] font-bold",children:[e.jsx(pe,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{children:"AffidabilitÃ  del punteggio"})]}),e.jsx("p",{className:"text-sm text-[var(--foreground)] opacity-60 leading-relaxed",children:"Se hai svolto pochi quiz (meno di 50-100), il tuo punteggio sarÃ  limitato perchÃ© i dati non sono sufficienti per una stima affidabile. Continua ad allenarti per sbloccare il tuo vero potenziale!"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-[var(--foreground)] opacity-40 uppercase tracking-wider pl-1",children:"Esempi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[var(--card)] p-4 rounded-2xl border border-[var(--card-border)] shadow-sm",children:[e.jsx("div",{className:"font-bold text-[var(--foreground)] mb-1",children:"Utente Principiante"}),e.jsxs("div",{className:"text-[13px] text-[var(--foreground)] opacity-50",children:["Pochi quiz ma 100% corretti â†’ ",e.jsx("span",{className:"text-amber-500 font-bold",children:"Punteggio Medio-Basso"})," (Manca volume)"]})]}),e.jsxs("div",{className:"bg-[var(--card)] p-4 rounded-2xl border border-[var(--card-border)] shadow-sm",children:[e.jsx("div",{className:"font-bold text-[var(--foreground)] mb-1",children:"Utente Esperto"}),e.jsxs("div",{className:"text-[13px] text-[var(--foreground)] opacity-50",children:["Tanti quiz, 85% corretti, attivo oggi â†’ ",e.jsx("span",{className:"text-emerald-500 font-bold",children:"Punteggio Alto"})]})]})]})]})]})}function ye(){return e.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-50 dark:bg-amber-900/30 rounded-2xl flex items-center justify-center mx-auto text-amber-500 mb-2",children:e.jsx($,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-2xl font-black text-[var(--foreground)]",children:"XP e Classifiche"}),e.jsxs("p",{className:"text-[var(--foreground)] opacity-50 font-medium leading-relaxed",children:["Gli XP premiano il tuo impegno quotidiano. Scala la ",e.jsx("strong",{children:"Gold League"})," sfidando gli altri utenti ogni due settimane."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{icon:e.jsx(J,{className:"w-5 h-5"}),title:"Come guadagni XP",subtitle:"1 Risposta = 1 XP",text:"Ottieni un punto esperienza per ogni risposta corretta, sia nelle simulazioni ufficiali che nelle prove personalizzate.",color:"amber"}),e.jsx(y,{icon:e.jsx(U,{className:"w-5 h-5"}),title:"Stagioni da 14 giorni",subtitle:"Reset periodico",text:"La classifica si azzera ogni due settimane. Questo dÃ  a tutti, anche ai nuovi arrivati, la possibilitÃ  di vincere la lega.",color:"blue"}),e.jsx(y,{icon:e.jsx(Z,{className:"w-5 h-5"}),title:"XP Totali vs Stagionali",subtitle:"Cosa rimane?",text:"I tuoi XP totali non scadono mai e rimangono nel tuo profilo. Solo il punteggio valido per la classifica viene resettato.",color:"emerald"})]}),e.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-3xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(Y,{className:"w-32 h-32"})}),e.jsx("h3",{className:"text-lg font-bold mb-2 relative z-10",children:"XP vs Punteggio"}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"XP (Punti Esperienza)"}),e.jsxs("p",{className:"text-sm font-medium text-slate-200",children:["Misurano ",e.jsx("strong",{children:"quanto ti alleni"}),". Premiano la quantitÃ  e la costanza."]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Punteggio (0-100)"}),e.jsxs("p",{className:"text-sm font-medium text-slate-200",children:["Misura ",e.jsx("strong",{children:"quanto sei bravo"})," in uno specifico concorso. Premia la qualitÃ ."]})]})]})]})]})}function y({icon:a,title:l,subtitle:r,text:t,color:s}){const o={cyan:"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-500",emerald:"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500",amber:"bg-amber-50 dark:bg-amber-900/30 text-amber-500",purple:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500",blue:"bg-blue-50 dark:bg-blue-900/30 text-blue-500"};return e.jsxs("div",{className:"bg-[var(--card)] p-5 rounded-[20px] shadow-sm border border-[var(--card-border)] flex gap-4 transition-colors",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex-shrink-0 flex items-center justify-center ${o[s]||o.cyan}`,children:a}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-[var(--foreground)] text-[16px]",children:l}),e.jsx("div",{className:"text-xs font-bold text-[var(--foreground)] opacity-40 uppercase tracking-wide mb-2",children:r}),e.jsx("p",{className:"text-[13px] text-[var(--foreground)] opacity-60 leading-relaxed font-medium",children:t})]})]})}function ke(){const[a,l]=c.useState("--g --o --m");return c.useEffect(()=>{const r=()=>{const s=new Date,o=new Date,n=(8-s.getDay())%7,m=n===0?7:n;o.setDate(s.getDate()+m),o.setHours(0,0,0,0);const p=o.getTime()-s.getTime();if(p<=0){l("Resetting...");return}const u=Math.floor(p/(1e3*60*60*24)),b=Math.floor(p/(1e3*60*60)%24),d=Math.floor(p/1e3/60%60),f=k=>k.toString().padStart(2,"0");u>0?l(`${u}g ${f(b)}o ${f(d)}m`):l(`${f(b)}o ${f(d)}m`)};r();const t=setInterval(r,6e4);return()=>clearInterval(t)},[]),e.jsxs("div",{"data-onboarding":"lb-timer",className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-50 dark:bg-amber-900/30 rounded-[14px] border border-amber-100 dark:border-amber-800 shadow-sm transition-all duration-300",children:[e.jsx(U,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide whitespace-nowrap",children:a})]})}function Le(){const{user:a,profile:l}=oe(),r=(l==null?void 0:l.role)==="admin",t=ue,s=r?be:fe,[o,n]=c.useState("xp"),[m,p]=c.useState([]),[u,b]=c.useState([]),[d,f]=c.useState([]),[k,T]=c.useState(null),[I,i]=c.useState(0),[g,L]=c.useState(!0),{startOnboarding:X,hasCompletedContext:R}=ie();c.useEffect(()=>{if(!g&&d.length>0&&!R("leaderboard")){const z=setTimeout(()=>X("leaderboard"),500);return()=>clearTimeout(z)}},[g,d.length,R,X]),c.useEffect(()=>{async function z(){try{let h=[],P=new Set;a&&(h=(await N.getUserActiveQuizzes(a.id)).map(x=>{var j;return{id:x.id,title:x.title,slug:x.slug,category:x.category_id,roleTitle:(j=x.role)==null?void 0:j.title}}),P=new Set(h.map(x=>x.id)),p(h));const{data:S}=await ne.from("quizzes").select("id, title, slug, role_id, role:roles(title)").not("role_id","is",null).order("title",{ascending:!0}).limit(100);if(S){const v=S.map(x=>{var j;return{id:x.id,title:x.title,slug:x.slug||"no-slug",roleTitle:(j=x.role)==null?void 0:j.title}}).filter(x=>!P.has(x.id));b(v)}}catch(h){console.error("Error loading options",h)}}z()},[a]),c.useEffect(()=>{async function z(){L(!0);try{let h=[],P=0,S=null;if(o==="xp"){const[v,x,j]=await Promise.all([N.getXPLeaderboard(),N.getXPParticipantsCount(),a?N.getUserXPRank(a.id):null]);h=v,P=x,S=j}else{const[v,x,j]=await Promise.all([N.getSkillLeaderboard(o),N.getParticipantsCount(o),a?N.getUserSkillRank(a.id,o):null]);h=v,P=x,S=j}a&&(h=h.map(v=>({...v,isCurrentUser:v.user.id===a.id}))),f(h),i(P),T(S)}catch(h){console.error("Error loading leaderboard",h)}finally{L(!1)}}z()},[o,a]);const C=o==="xp",ae=C?"gold":"emerald",[te,F]=c.useState(!1),[se,E]=c.useState(!1),[A,B]=c.useState("xp");c.useEffect(()=>{localStorage.getItem("idoneo_leaderboard_onboarding")||(B("xp"),setTimeout(()=>F(!0),500))},[]);const re=()=>{F(!1),localStorage.setItem("idoneo_leaderboard_onboarding","true")},O=()=>{B(C?"xp":"prep"),F(!0)};return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden bg-[var(--background)] text-[var(--foreground)] transition-colors duration-300",children:[e.jsx("div",{className:"flex-none p-4 lg:p-8 pt-safe relative z-40",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-2",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-[var(--foreground)] flex items-center gap-3",children:[e.jsx($,{className:"w-8 h-8 text-amber-500"}),"Classifica"]}),e.jsx("p",{className:"text-[var(--foreground)] opacity-50 mt-1",children:"Competi con gli altri studenti e scala la classifica"})]}),e.jsx("button",{onClick:O,className:"p-3 rounded-xl bg-[var(--card)] hover:bg-slate-100 dark:hover:bg-slate-700 text-[var(--foreground)] opacity-50 hover:opacity-100 transition-colors shadow-sm border border-[var(--card-border)]",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"lg:hidden flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-10"})," ",e.jsx("div",{"data-onboarding":"lb-selector",children:e.jsx(t,{currentSelection:o,onSelect:n,activeQuizzes:m,otherQuizzes:u})}),e.jsx("button",{onClick:O,className:"p-2 rounded-full bg-[var(--card)] shadow-sm border border-[var(--card-border)] text-[var(--foreground)] opacity-50 hover:opacity-100 transition-colors",children:e.jsx(q,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"hidden lg:flex flex-col items-center justify-center",children:e.jsx(t,{currentSelection:o,onSelect:n,activeQuizzes:m,otherQuizzes:u})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden relative w-full max-w-5xl mx-auto px-4 lg:px-8 pb-4 lg:pb-8",children:e.jsxs("div",{"data-onboarding":"lb-ranking",className:"relative h-full bg-[var(--card)] rounded-t-[32px] lg:rounded-[32px] shadow-lg flex flex-col border border-[var(--card-border)] overflow-hidden pb-safe",children:[!g&&d.length>0&&e.jsxs("div",{className:"flex-none flex flex-col items-center justify-center pt-4 pb-3 px-4 border-b border-slate-100 dark:border-slate-700 bg-[var(--card)] space-y-2",children:[e.jsx("p",{className:"text-[11px] text-[var(--foreground)] opacity-50 font-bold uppercase tracking-widest flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-3.5 h-3.5 text-purple-500"}),"Classifica Settimanale"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-3.5 h-3.5 text-emerald-500"}),"Classifica Concorso"]})}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-slate-50 rounded-[14px] border border-slate-100 shadow-sm transition-all hover:bg-slate-100",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)] animate-pulse"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide whitespace-nowrap",children:[I," ",I===1?"Partecipante":"Partecipanti"]})]}),C&&e.jsx(ke,{})]})]}),e.jsx("div",{className:"flex-1 overflow-visible",children:e.jsx(s,{data:d,currentUserEntry:k,loading:g,theme:ae,metricLabel:C?"XP":"Punti",emptyMessage:C?"Nessun giocatore in questa lega ancora.":"Nessuno ha completato questa simulazione."})})]})}),e.jsx(je,{isOpen:te,onClose:re,type:A,onMoreInfo:()=>{F(!1),E(!0),localStorage.setItem("idoneo_leaderboard_onboarding","true")}}),se&&e.jsx(we,{onBack:()=>E(!1),initialTab:A})]})}export{Le as default};
