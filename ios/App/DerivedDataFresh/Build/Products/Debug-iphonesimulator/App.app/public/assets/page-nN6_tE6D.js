import{j as e,m as y,A as E}from"./framer-BdaCTGm4.js";import{r as h,b as W,u as V,L as P,R as X}from"./router-ClfHAwMg.js";import{u as Y,s as g,a as G}from"./index-DBMi1b3R.js";import{offlineService as $}from"./offlineService-CPccCdKZ.js";import{T as J}from"./TierSLoader-BJdwavnO.js";import{c as I}from"./statsService-Bi-BA9r_.js";import{m as C,a3 as K,O,T as U,X as H,I as R,E as Z,l as ee,v as ae,n as te,z as re,o as se,R as le,a7 as M,q as ie,b as oe,Q as de,y as ne}from"./icons-DIoLbN6D.js";import{A as ce}from"./AttemptCard-CI0gYZ4p.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function xe(s,d){const{user:o}=Y(),[a,r]=h.useState({role:null,resources:[],latestQuizId:null,latestQuizSlug:null,history:[],candidatiCount:0,loading:!0,error:null});return h.useEffect(()=>{if(!d)return;(async()=>{var t,f;try{const{data:l,error:b}=await g.from("roles").select("*, category:categories(slug)").eq("slug",d).single();if(b||!l)throw new Error((b==null?void 0:b.message)||"Ruolo non trovato");const[x,j,v,w]=await Promise.all([g.from("role_resources").select("*").eq("role_id",l.id).order("order_index",{ascending:!0}),g.from("quizzes").select("id, slug, year, title").eq("role_id",l.id).eq("is_official",!0).eq("is_archived",!1).order("year",{ascending:!1}).limit(1),o?g.from("contests").select("id").eq("role_id",l.id):Promise.resolve({data:[]}),g.rpc("get_role_candidate_count",{target_role_id:l.id})]),F=x.data||[],m=(t=j.data)==null?void 0:t[0],N=(m==null?void 0:m.id)||null,z=(m==null?void 0:m.slug)||null,_=((f=v.data)==null?void 0:f.map(p=>p.id))||[],q=w.data||0;let B=[],u=null;if(o){let p=g.from("quizzes").select("id, title");_.length>0?p=p.or(`role_id.eq.${l.id},contest_id.in.(${_.join(",")})`):p=p.eq("role_id",l.id);const[T,i]=await Promise.all([p,N?g.from("concorso_leaderboard").select("score, volume_factor, accuracy_weighted, recency_score, coverage_score, reliability").eq("user_id",o.id).eq("quiz_id",N).maybeSingle():Promise.resolve({data:null})]),n=T.data||[],S=new Map(n.map(k=>[k.id,k.title])),D=n.map(k=>k.id);if(u=i.data,D.length>0){const{data:k}=await g.from("quiz_attempts").select("id, score, created_at, quiz_id, correct, total_questions, mode").eq("user_id",o.id).in("quiz_id",D).order("created_at",{ascending:!1}).limit(20);k&&(B=k.map(A=>{var L;return{...A,is_official_sim:((L=S.get(A.quiz_id))==null?void 0:L.includes("Ufficiale"))||!1,quiz:{title:S.get(A.quiz_id)||"Simulazione"}}}))}}r({role:{id:l.id,title:l.title,slug:l.slug,description:l.description||"",available_positions:l.available_positions||"",share_bank_link:l.share_bank_link||"",category_slug:s},resources:F,latestQuizId:N,latestQuizSlug:z,history:B,candidatiCount:q,leaderboardData:u,loading:!1,error:null})}catch(l){console.error(l),r(b=>({...b,loading:!1,error:l.message}))}})()},[d,o]),a}function me({history:s,theme:d,leaderboardData:o}){const[a,r]=h.useState(!1),c=h.useMemo(()=>{if(o&&o.score!==void 0)return I(0,0,s.length,o);if(!s||s.length<3)return null;const v=s.length,w=s.reduce((N,z)=>N+(z.score||0),0),m=(v?w/v:0)/30*100;return I(m,m,v)},[s,o]);if(!c)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>r(!0),className:"group relative bg-white dark:bg-[var(--card)] p-6 rounded-[32px] shadow-soft border border-[var(--card-border)] overflow-hidden min-h-[140px] flex items-center cursor-pointer hover:scale-[1.01] transition-transform active:scale-[0.99]",children:[e.jsx("div",{className:`absolute top-0 right-0 w-40 h-40 bg-gradient-to-bl ${d.gradient} opacity-[0.05] rounded-bl-[100px] pointer-events-none`}),e.jsxs("div",{className:"flex items-center justify-between relative z-10 w-full",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider bg-slate-100 dark:bg-slate-800 text-slate-500",children:"Da iniziare"})}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-[var(--foreground)] mb-1 leading-tight",children:"Analisi in attesa..."}),e.jsx("p",{className:"text-[14px] text-slate-500 dark:text-slate-400 leading-snug",children:"Completa almeno 3 simulazioni per sbloccare il calcolo del livello di preparazione."})]}),e.jsx("div",{className:"relative w-14 h-14 flex-shrink-0 flex items-center justify-center rounded-2xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 group-hover:bg-slate-100 dark:group-hover:bg-slate-700 transition-colors",children:e.jsx(C,{className:"w-6 h-6 text-slate-300 dark:text-slate-600"})})]})]}),e.jsx(Q,{isOpen:a,onClose:()=>r(!1),theme:d,stats:null})]});const{level:t,label:f,color:l}=c,b={"semantic-success":{stroke:"#10B981",bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400"},"brand-orange":{stroke:"#F59E0B",bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-600 dark:text-amber-400"},"semantic-error":{stroke:"#EF4444",bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400"}},x=b[l]||b["brand-orange"],j=t==="high"?92:t==="medium"?65:35;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>r(!0),className:"group relative bg-white dark:bg-[var(--card)] p-6 rounded-[32px] shadow-soft border border-[var(--card-border)] overflow-hidden cursor-pointer hover:border-[#00B1FF]/30 transition-colors",children:[e.jsx("div",{className:`absolute top-0 right-0 w-40 h-40 bg-gradient-to-bl ${d.gradient} opacity-[0.05] rounded-bl-[100px] pointer-events-none`}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-wider ${x.bg} ${x.text}`,children:f}),e.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400",children:e.jsx(K,{className:"w-2.5 h-2.5"})})]}),e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-[var(--foreground)] mb-1 leading-tight",children:["Sei ",t==="high"?"pronto!":t==="medium"?"buon punto":"all'inizio"]}),e.jsx("p",{className:"text-[14px] text-slate-500 dark:text-slate-400 leading-snug",children:t==="high"?"Ottima costanza. Sei pronto per la prova ufficiale.":t==="medium"?"Continua cosÃ¬, manca poco per l'eccellenza.":"Serve piÃ¹ allenamento. Non mollare!"})]}),e.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"40",cy:"40",r:"32",stroke:"currentColor",strokeWidth:"6",fill:"transparent",className:"text-slate-100 dark:text-slate-800"}),e.jsx(y.circle,{initial:{strokeDasharray:200,strokeDashoffset:200},animate:{strokeDashoffset:200-(c.score!==void 0?c.score:j)/100*200},transition:{duration:1.5,ease:"easeOut"},cx:"40",cy:"40",r:"32",stroke:x.stroke,strokeWidth:"6",strokeLinecap:"round",fill:"transparent"})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:c.score!==void 0?e.jsx("span",{className:`text-lg font-black ${x.text}`,children:Math.round(c.score)}):e.jsx(e.Fragment,{children:t==="high"?e.jsx(C,{className:`w-6 h-6 ${x.text}`}):t==="medium"?e.jsx(O,{className:`w-6 h-6 ${x.text}`}):e.jsx(U,{className:`w-6 h-6 ${x.text}`})})})]})]})]}),e.jsx(Q,{isOpen:a,onClose:()=>r(!1),theme:d,stats:c})]})}function Q({isOpen:s,onClose:d,theme:o,stats:a}){return e.jsx(E,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 px-8",children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(y.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative bg-white dark:bg-[var(--card)] border border-transparent dark:border-[var(--card-border)] rounded-[32px] p-6 max-w-sm w-full shadow-2xl overflow-y-auto max-h-[90vh] custom-scrollbar",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl ${o.gradient} opacity-[0.1] rounded-bl-[100px] pointer-events-none`}),e.jsx("button",{onClick:d,className:"absolute top-4 right-4 p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500 dark:text-slate-400 opacity-70 hover:opacity-100 transition-colors z-50",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-[var(--foreground)] mb-2",children:"Livello di Preparazione"}),e.jsx("p",{className:"text-[14px] text-slate-500 dark:text-slate-400 leading-relaxed mb-6",children:"Il nostro algoritmo analizza le tue ultime simulazioni per calcolare quanto sei pronto per l'esame ufficiale."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-2xl flex items-center gap-3 border ${(a==null?void 0:a.level)==="high"?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-slate-50 dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/50 flex items-center justify-center flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[14px] font-bold text-slate-900 dark:text-slate-200",children:"Pronto"}),e.jsx("p",{className:"text-[12px] text-slate-500 dark:text-slate-400",children:"Media superiore a 90/100."})]}),(a==null?void 0:a.level)==="high"&&e.jsx(R,{className:"w-5 h-5 text-emerald-500 ml-auto"})]}),e.jsxs("div",{className:`p-3 rounded-2xl flex items-center gap-3 border ${(a==null?void 0:a.level)==="medium"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-slate-50 dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center flex-shrink-0",children:e.jsx(O,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[14px] font-bold text-slate-900 dark:text-slate-200",children:"A buon punto"}),e.jsx("p",{className:"text-[12px] text-slate-500 dark:text-slate-400",children:"Media tra 70/100 e 90/100."})]}),(a==null?void 0:a.level)==="medium"&&e.jsx(R,{className:"w-5 h-5 text-amber-500 ml-auto"})]}),e.jsxs("div",{className:`p-3 rounded-2xl flex items-center gap-3 border ${(a==null?void 0:a.level)==="low"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-slate-50 dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center flex-shrink-0",children:e.jsx(U,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[14px] font-bold text-slate-900 dark:text-slate-200",children:"Da migliorare"}),e.jsx("p",{className:"text-[12px] text-slate-500 dark:text-slate-400",children:"Media inferiore a 70/100."})]}),(a==null?void 0:a.level)==="low"&&e.jsx(R,{className:"w-5 h-5 text-red-500 ml-auto"})]})]}),(a==null?void 0:a.breakdown)&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-800 space-y-4",children:[e.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Analisi Dettagliata"}),[{label:"Accuratezza",value:a.breakdown.accuracy,color:"bg-emerald-500"},{label:"Volume (Risposte Corrette)",value:a.breakdown.volume,color:"bg-blue-500"},{label:"Copertura Banca Dati",value:a.breakdown.coverage,color:"bg-purple-500"},{label:"Costanza (Reliability)",value:a.breakdown.reliability,color:"bg-amber-500"}].map(r=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:r.label}),e.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Math.round(r.value),"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${r.value}%`},className:`h-full ${r.color}`})})]},r.label))]}),e.jsxs("a",{href:"/come-funziona/punteggi",className:"mt-4 flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-[#00B1FF]/10 to-emerald-500/10 hover:from-[#00B1FF]/20 hover:to-emerald-500/20 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00B1FF]/20 flex items-center justify-center",children:e.jsx(Z,{className:"w-4 h-4 text-[#00B1FF]"})}),e.jsx("span",{className:"text-[13px] font-bold text-slate-700 dark:text-slate-200",children:"Scopri come calcoliamo i punteggi"})]}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("p",{className:"text-[12px] text-slate-400 text-center",children:["Il calcolo si attiva dopo almeno ",e.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:"3 simulazioni"})," completate."]})}),e.jsx("button",{onClick:d,className:"w-full mt-4 py-3 bg-slate-900 dark:bg-[var(--foreground)] text-white dark:text-[var(--background)] rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Chiaro!"})]})]})]})})}function ye(){const{category:s,role:d}=W(),o=V(),{role:a,resources:r,history:c,latestQuizId:t,latestQuizSlug:f,candidatiCount:l,leaderboardData:b,loading:x,error:j}=xe(s||"",d||""),[v,w]=h.useState(!1),[F,m]=h.useState(!1),[N,z]=h.useState(0),{startOnboarding:_,hasCompletedContext:q}=G();h.useEffect(()=>{if(!x&&a&&!q("rolepage")){const i=setTimeout(()=>_("rolepage"),500);return()=>clearTimeout(i)}},[x,a,q,_]),h.useEffect(()=>{(async()=>{if(t&&!v&&!F)try{const n=await $.isQuizDownloaded(t);w(n),n||(m(!0),console.log(`[AutoCache] Starting download for ${t}...`),await $.downloadQuiz(t,S=>z(S)),w(!0),console.log("[AutoCache] Completed."))}catch(n){console.error("[AutoCache] Failed:",n)}finally{m(!1)}})()},[t]);const u=(i=>{const n=i.toLowerCase();return n.includes("polizia")?{gradient:"from-cyan-500 to-blue-600",shadow:"shadow-cyan-500/20",text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-400/10",button:"bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-700"}:n.includes("carabinieri")?{gradient:"from-blue-600 to-indigo-700",shadow:"shadow-blue-500/20",text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-400/10",button:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700"}:n.includes("finanza")?{gradient:"from-amber-400 to-orange-500",shadow:"shadow-amber-500/20",text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-400/10",button:"bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-700"}:n.includes("esercito")?{gradient:"from-emerald-500 to-green-600",shadow:"shadow-emerald-500/20",text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-400/10",button:"bg-emerald-500 hover:bg-emerald-600 dark:bg-emerald-600 dark:hover:bg-emerald-700"}:n.includes("sanitÃ ")?{gradient:"from-rose-500 to-pink-600",shadow:"shadow-rose-500/20",text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-400/10",button:"bg-rose-500 hover:bg-rose-600 dark:bg-rose-600 dark:hover:bg-rose-700"}:{gradient:"from-slate-500 to-slate-700",shadow:"shadow-slate-500/20",text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-400/10",button:"bg-slate-800 hover:bg-slate-900 dark:bg-slate-700 dark:hover:bg-slate-800"}})(s||""),p=async()=>{if(!t)return alert("Nessun simulatore disponibile per questo ruolo.");if(!navigator.onLine)if(await $.isQuizDownloaded(t))try{const n=await $.createLocalAttempt(t);o(`/quiz/run/${n}`);return}catch(n){return console.error(n),alert("Errore creazione sessione offline.")}else return alert("Sei offline e non hai scaricato questa banca dati.");o(`/quiz/${t}/official`)},T=()=>{if(!f)return alert("Nessun simulatore disponibile.");o(`/concorsi/${s}/${d}/${f}/custom`)};return x?e.jsx(J,{message:"Caricamento ruolo..."}):j||!a?e.jsxs("div",{className:"min-h-screen bg-[#F5F5F7] flex flex-col items-center justify-center px-6",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ˜•"}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Ruolo non trovato"}),e.jsx("p",{className:"text-slate-500 text-center mb-6",children:j||"Questo ruolo non esiste."}),e.jsx(P,{to:"/",className:"text-[#00B1FF] font-semibold",children:"â† Torna alla Home"})]}):e.jsxs("div",{className:"min-h-screen bg-[#F5F5F7] dark:bg-[var(--background)] pb-24 transition-colors duration-300",children:[e.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-[var(--card)] pb-6 md:pb-10 rounded-b-[32px] md:rounded-b-[40px] shadow-sm z-10 transition-colors",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${u.gradient} opacity-[0.03] dark:opacity-[0.05]`}),e.jsxs("div",{className:"relative z-20 pt-safe px-4 h-14 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>o(-1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-100/50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 transition-colors",children:e.jsx(ee,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[10px] md:text-[11px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:s==null?void 0:s.replace(/-/g," ")}),e.jsx("div",{className:"w-10"})," "]}),e.jsxs("div",{className:"px-5 md:px-6 pt-2 md:pt-4 relative z-10",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-black text-slate-900 dark:text-[var(--foreground)] leading-[1.1] mb-2 md:mb-3",children:a.title}),e.jsx("p",{className:"text-[14px] md:text-[15px] text-slate-500 dark:text-slate-400 leading-relaxed max-w-xl mb-4",children:a.description||"Allenati per questo profilo con i nostri simulatori ufficiali."})]})]}),e.jsxs("main",{className:"px-4 md:px-5 max-w-lg mx-auto -mt-6 relative z-20 space-y-5 md:space-y-6",children:[a&&e.jsx("div",{"data-onboarding":"readiness",children:e.jsx(me,{history:c,theme:u,leaderboardData:b})}),a&&e.jsx(ue,{theme:u,candidatiCount:l,availableSeats:a.available_positions}),e.jsxs("div",{"data-onboarding":"start-quiz",onClick:p,className:"group relative bg-white dark:bg-[var(--card)] rounded-[32px] p-6 shadow-soft cursor-pointer hover:scale-[1.02] transition-all duration-300 overflow-hidden active:scale-[0.98] border border-transparent dark:border-[var(--card-border)]",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl ${u.gradient} opacity-10 dark:opacity-20 rounded-bl-[100px] transition-transform group-hover:scale-110`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl ${u.bg} dark:bg-opacity-10 flex items-center justify-center`,children:e.jsx(C,{className:`w-7 h-7 ${u.text} dark:text-opacity-80`,fill:"currentColor",fillOpacity:.2})}),e.jsx("div",{className:`px-3 py-1 rounded-full ${u.bg} dark:bg-opacity-10 ${u.text} bg-opacity-50 text-[11px] font-bold uppercase tracking-wider`,children:"Ufficiale"})]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-[var(--foreground)] mb-1",children:"Simulazione Ufficiale"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[14px] leading-snug mb-6 max-w-[80%]",children:"Replica l'esame reale con timer, punteggi e modalitÃ  ufficiali."}),e.jsxs("button",{className:`w-full py-3.5 rounded-xl ${u.button} text-white font-bold text-[15px] shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2 transition-transform`,children:[e.jsx(ae,{className:"w-4 h-4 fill-current"}),"Avvia Simulazione"]})]})]}),e.jsxs("div",{"data-onboarding":"custom-quiz",onClick:T,className:"group relative bg-white dark:bg-[var(--card)] rounded-[32px] p-6 shadow-soft cursor-pointer hover:scale-[1.02] transition-all duration-300 overflow-hidden active:scale-[0.98] border border-transparent dark:border-[var(--card-border)]",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-purple-400 to-fuchsia-500 opacity-5 dark:opacity-10 rounded-bl-[100px]"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center flex-shrink-0",children:e.jsx(te,{className:"w-7 h-7 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-[17px] font-bold text-slate-900 dark:text-[var(--foreground)]",children:"Prova Personalizzata"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[13px] leading-tight mt-1",children:"Scegli materie e n. domande."})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center group-hover:bg-purple-100 dark:group-hover:bg-purple-900/30 transition-colors",children:e.jsx(re,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 group-hover:text-purple-600 dark:group-hover:text-purple-400"})})]})]}),e.jsxs("div",{"data-onboarding":"history",className:"space-y-3",children:[e.jsx("h3",{className:"text-[13px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider px-2",children:"Le tue attivitÃ "}),e.jsx("div",{className:"bg-white dark:bg-[var(--card)] rounded-[24px] overflow-hidden shadow-sm border border-slate-100/50 dark:border-slate-800",children:c.length>0?e.jsxs("div",{className:"divide-y divide-slate-50 dark:divide-slate-800",children:[c.slice(0,3).map(i=>e.jsx(ce,{attempt:{id:i.id,created_at:i.created_at,score:i.score,total_questions:i.total_questions,correct:i.correct,mode:i.mode}},i.id)),e.jsx(P,{to:"#",className:"block p-3 text-center text-[13px] font-medium text-[#00B1FF] bg-slate-50/50 dark:bg-slate-800/30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Vedi tutta la cronologia"})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(se,{className:"w-8 h-8 text-slate-200 dark:text-slate-700 mx-auto mb-2"}),e.jsx("p",{className:"text-[13px] text-slate-400 dark:text-slate-500",children:"Nessuna attivitÃ  recente"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-[13px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider px-2",children:"Materiali & Link"}),e.jsx("div",{className:"bg-white dark:bg-[var(--card)] rounded-[24px] overflow-hidden shadow-sm border border-slate-100/50 dark:border-slate-800",children:r.length>0?e.jsx("div",{className:"divide-y divide-slate-50 dark:divide-slate-800",children:r.map(i=>e.jsxs("a",{href:i.url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-3 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-500 dark:text-orange-400",children:i.type==="pdf"?e.jsx(le,{className:"w-4 h-4"}):e.jsx(M,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-[14px] font-medium text-slate-700 dark:text-slate-300 flex-1 truncate",children:i.title}),e.jsx(M,{className:"w-3.5 h-3.5 text-slate-300 dark:text-slate-600"})]},i.id))}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(ie,{className:"w-8 h-8 text-slate-200 dark:text-slate-700 mx-auto mb-2"}),e.jsx("p",{className:"text-[13px] text-slate-400 dark:text-slate-500",children:"Nessun materiale disponibile"})]})}),a.share_bank_link&&e.jsxs("a",{href:a.share_bank_link,target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-2 w-full py-4 rounded-[24px] bg-[#00B1FF]/10 dark:bg-[#00B1FF]/20 text-[#00B1FF] font-bold text-[14px] hover:bg-[#00B1FF]/20 dark:hover:bg-[#00B1FF]/30 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4"}),"Banca Dati Ufficiale"]})]})]})]})}function ue({theme:s,candidatiCount:d,availableSeats:o}){const[a,r]=h.useState(null),c=[{id:"candidati",value:d,label:"Candidati",icon:de,themeBg:s.bg,themeText:s.text,description:"Il numero totale di utenti unici che hanno partecipato alle simulazioni per questo profilo."},{id:"posti",value:o||"N/D",label:"Posti Totali",icon:C,themeBg:"bg-emerald-50 dark:bg-emerald-900/30",themeText:"text-emerald-600 dark:text-emerald-400",description:"Il numero complessivo di posti messi a bando per questo profilo specifico."},{id:"edizione",value:new Date().getFullYear(),label:"Edizione",icon:ne,themeBg:"bg-purple-50 dark:bg-purple-900/30",themeText:"text-purple-600 dark:text-purple-400",description:"L'anno di riferimento per i concorsi attualmente attivi per questo profilo."}];return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"flex md:grid md:grid-cols-3 gap-2.5 md:gap-4 overflow-x-auto md:overflow-visible pb-1 md:pb-0 -mx-4 md:mx-0 px-4 md:px-0 scrollbar-hide snap-x md:snap-none",children:c.map(t=>e.jsxs("div",{onClick:()=>r({title:t.label,desc:t.description,icon:t.icon,themeBg:t.themeBg,themeText:t.themeText}),className:"cursor-pointer active:scale-95 transition-transform snap-start flex-1 min-w-[100px] md:w-auto bg-white dark:bg-[var(--card)] rounded-2xl p-3 md:p-4 shadow-soft border border-transparent dark:border-[var(--card-border)] flex flex-col items-center justify-center gap-1 md:gap-2 hover:border-[#00B1FF]/30",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${t.themeBg} flex items-center justify-center mb-1`,children:e.jsx(t.icon,{className:`w-4 h-4 ${t.themeText}`})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-lg md:text-xl font-bold text-slate-900 dark:text-[var(--foreground)] leading-none mb-1",children:t.value}),e.jsx("span",{className:"block text-[10px] font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wide",children:t.label})]})]},t.id))}),e.jsx(E,{children:a&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 px-8",children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>r(null),className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(y.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative bg-white dark:bg-[var(--card)] border border-transparent dark:border-[var(--card-border)] rounded-[24px] p-6 max-w-sm w-full shadow-2xl text-center",children:[e.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500 dark:text-slate-400 opacity-50 hover:opacity-100 transition-colors",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("div",{className:`w-16 h-16 rounded-2xl ${a.themeBg} flex items-center justify-center mx-auto mb-4`,children:X.createElement(a.icon,{className:`w-8 h-8 ${a.themeText}`})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-[var(--foreground)] mb-2",children:a.title}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[15px] leading-relaxed mb-6",children:a.desc}),e.jsx("button",{onClick:()=>r(null),className:"w-full py-3 bg-slate-900 dark:bg-[var(--foreground)] text-white dark:text-[var(--background)] rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Ho capito"})]})]})})]})}export{ye as default};
