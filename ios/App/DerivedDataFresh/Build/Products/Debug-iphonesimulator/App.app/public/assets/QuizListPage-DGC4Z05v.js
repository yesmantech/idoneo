import{j as e}from"./framer-CcO5Kjcw.js";import{r as l,R as J,u as V}from"./router-ClfHAwMg.js";import{A as Y}from"./AdminLayout-D8QxpNpO.js";import{A as Z}from"./AdminPageHeader-C5qq5tie.js";import{A as ee,E as se}from"./EmptyState-KxudHq5H.js";import{S as te}from"./StatusBadge-BfHkbfKa.js";import{s as C}from"./index-Z19V86or.js";import{X as $,a8 as re,o as ae,m as le,q as ie,aG as G,I as oe,h as ne}from"./icons-Dvxa2Qho.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function ce({open:m,onClose:d,title:x,description:o,warning:g,confirmLabel:v="Conferma",cancelLabel:f="Annulla",confirmVariant:_="default",onConfirm:j}){const[n,N]=l.useState(!1);if(!m)return null;const w=async()=>{N(!0);try{await j(),d()}catch(k){console.error("Confirm action failed:",k)}finally{N(!1)}},y=_==="destructive"?"bg-rose-500 hover:bg-rose-600 text-white shadow-rose-500/25":"bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-500/25";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-[var(--card)] border border-[var(--card-border)] rounded-xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 pb-4",children:e.jsx("h2",{id:"dialog-title",className:"text-lg font-bold text-[var(--foreground)]",children:x})}),e.jsxs("div",{className:"px-6 pb-4",children:[e.jsx("p",{className:"text-[var(--foreground)] opacity-50 text-sm",children:o}),g&&e.jsx("div",{className:"mt-4 p-3 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:e.jsxs("p",{className:"text-rose-500 dark:text-rose-400 text-sm font-medium flex items-start gap-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{children:g})]})})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 border-t border-[var(--card-border)] flex justify-end gap-3",children:[e.jsx("button",{onClick:d,disabled:n,className:"px-4 py-3 text-sm font-medium text-[var(--foreground)] opacity-50 hover:bg-slate-100 dark:hover:bg-slate-800 hover:opacity-100 rounded-lg transition-all disabled:opacity-50",children:f}),e.jsx("button",{onClick:w,disabled:n,className:`px-4 py-3 text-sm font-medium rounded-lg shadow-lg transition-all disabled:opacity-50 ${y}`,children:n?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"â³"}),e.jsx("span",{children:"Attendere..."})]}):v})]})]})]})}const U={title:"",slug:"",roleId:"",year:"",description:"",timeLimit:"60",pointsCorrect:"1",pointsWrong:"-0.25",pointsBlank:"0",isArchived:!1,useCustomPassThreshold:!1,minCorrectForPass:"",subjectCounts:{}};function de(m){return m.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function q(m){const d=parseInt(m,10);return isNaN(d)?null:d}function W(m){const d=parseFloat(m);return isNaN(d)?null:d}function me(){const[m,d]=l.useState([]),[x,o]=l.useState([]),[g,v]=l.useState([]),[f,_]=l.useState([]),[j,n]=l.useState([]),[N,w]=l.useState(!0),[y,k]=l.useState(null),[u,t]=l.useState(!1),[p,S]=l.useState(null),[c,B]=l.useState(U),[I,A]=l.useState(!1),[F,z]=l.useState(null),[T,E]=l.useState(null),R=l.useCallback(async()=>{w(!0),k(null);try{const[s,r,i,h,b]=await Promise.all([C.from("quizzes").select("*").order("title"),C.from("subjects").select("*").order("name"),C.from("roles").select("id, title, category_id, slug").order("title"),C.from("categories").select("id, title").order("title"),C.from("quiz_subject_rules").select("*")]);if(s.error)throw s.error;if(r.error)throw r.error;if(i.error)throw i.error;if(h.error)throw h.error;if(b.error)throw b.error;d(s.data||[]),o(r.data||[]),v(i.data||[]),_(h.data||[]),n(b.data||[])}catch(s){const r=s instanceof Error?s.message:"Errore nel caricamento";console.error(s),k(r)}finally{w(!1)}},[]);l.useEffect(()=>{R()},[R]);const L=l.useCallback(()=>{S(null),B(U),z(null),E(null)},[]),Q=l.useCallback(s=>{S(s.id);const r={};j.filter(i=>i.quiz_id===s.id).forEach(i=>{r[i.subject_id]=i.question_count}),B({title:s.title||"",slug:s.slug||"",roleId:s.role_id||"",year:s.year!==null?String(s.year):"",description:s.description||"",timeLimit:s.time_limit!==null?String(s.time_limit):"60",pointsCorrect:s.points_correct!==null?String(s.points_correct):"1",pointsWrong:s.points_wrong!==null?String(s.points_wrong):"-0.25",pointsBlank:s.points_blank!==null?String(s.points_blank):"0",isArchived:!!s.is_archived,useCustomPassThreshold:!!s.use_custom_pass_threshold,minCorrectForPass:s.min_correct_for_pass!==null?String(s.min_correct_for_pass):"",subjectCounts:r}),z(null),E(null)},[j]),O=l.useCallback((s,r)=>{B(i=>({...i,[s]:r})),z(null)},[]),M=l.useCallback(async()=>{A(!0),z(null),E(null);try{if(!c.title.trim())throw new Error("Il titolo Ã¨ obbligatorio.");const s=Object.values(c.subjectCounts).reduce((h,b)=>h+b,0),r={title:c.title.trim(),slug:c.slug.trim()||de(c.title),role_id:c.roleId||null,description:c.description.trim()||null,year:q(c.year),time_limit:q(c.timeLimit),points_correct:W(c.pointsCorrect),points_wrong:W(c.pointsWrong),points_blank:W(c.pointsBlank),total_questions:s,is_archived:c.isArchived,use_custom_pass_threshold:c.useCustomPassThreshold,min_correct_for_pass:q(c.minCorrectForPass)};let i=p;if(i){const{error:h}=await C.from("quizzes").update(r).eq("id",i);if(h)throw h}else{const{data:h,error:b}=await C.from("quizzes").insert(r).select().single();if(b)throw b;i=h.id}if(i&&Object.keys(c.subjectCounts).length>0){const h=Object.entries(c.subjectCounts).map(([X,D])=>({quiz_id:i,subject_id:X,question_count:D||0})),{error:b}=await C.from("quiz_subject_rules").upsert(h,{onConflict:"quiz_id,subject_id"});b&&console.error("Error saving rules:",b)}E(p?"Concorso aggiornato âœ…":"Concorso creato âœ…"),await R(),p||L()}catch(s){const r=s instanceof Error?s.message:"Errore salvataggio";console.error(s),z(r)}finally{A(!1)}},[c,p,R,L]),a=l.useCallback(async s=>{try{const{data:r,error:i}=await C.from("quizzes").update({is_archived:!s.is_archived}).eq("id",s.id).select().single();if(i)throw i;r&&d(h=>h.map(b=>b.id===s.id?r:b))}catch(r){const i=r instanceof Error?r.message:"Errore aggiornamento";console.error(r),alert(i)}},[]),P=u?m:m.filter(s=>!s.is_archived),H=l.useCallback(s=>x.filter(r=>r.quiz_id===s&&!r.is_archived),[x]),K=l.useCallback(s=>{if(!s)return"-";const r=g.find(i=>i.id===s);return(r==null?void 0:r.title)||"-"},[g]);return{quizzes:m,subjects:x,roles:g,categories:f,quizSubjectRules:j,loading:N,error:y,showArchived:u,setShowArchived:t,editingId:p,formData:c,formSaving:I,formError:F,formSuccess:T,loadData:R,startEdit:Q,resetForm:L,updateFormField:O,saveQuiz:M,toggleArchive:a,visibleQuizzes:P,getSubjectsForQuiz:H,getRoleTitle:K}}function ue({isOpen:m,onClose:d,editingId:x,formData:o,formSaving:g,formError:v,formSuccess:f,roles:_,subjects:j,updateFormField:n,onSave:N}){if(!m)return null;const w=t=>{t.preventDefault(),N()},y=J.useMemo(()=>x?j.filter(t=>t.quiz_id===x&&!t.is_archived):[],[j,x]),k=(t,p)=>{const S=parseInt(p)||0;n("subjectCounts",{...o.subjectCounts,[t]:S})},u="w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#00B1FF]/30 focus:border-[#00B1FF] transition-all";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white rounded-[20px] shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-gradient-to-r from-slate-50 to-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:x?"Modifica Concorso":"Nuovo Concorso"}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:x?"Modifica le informazioni del concorso":"Crea un nuovo concorso per gli utenti"})]}),e.jsx("button",{onClick:d,className:"w-10 h-10 rounded-xl bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500 hover:text-slate-700 transition-all",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:w,className:"flex-1 overflow-y-auto p-6 space-y-6 bg-[#F5F5F7]",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-sky-50 flex items-center justify-center",children:e.jsx(re,{className:"w-4 h-4 text-sky-500"})}),e.jsx("h3",{className:"font-bold text-slate-900",children:"Informazioni Base"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Titolo *"}),e.jsx("input",{type:"text",value:o.title,onChange:t=>n("title",t.target.value),placeholder:"Es. Concorso Carabinieri 2024",className:u,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Slug URL"}),e.jsx("input",{type:"text",value:o.slug,onChange:t=>n("slug",t.target.value),placeholder:"auto-generato",className:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Anno"}),e.jsx("input",{type:"number",value:o.year,onChange:t=>n("year",t.target.value),placeholder:"2024",className:u})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Ruolo / Categoria"}),e.jsxs("select",{value:o.roleId,onChange:t=>n("roleId",t.target.value),className:u,children:[e.jsx("option",{value:"",children:"Nessun ruolo"}),_.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Descrizione"}),e.jsx("textarea",{value:o.description,onChange:t=>n("description",t.target.value),placeholder:"Descrizione opzionale...",rows:3,className:`${u} resize-none`})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-violet-50 flex items-center justify-center",children:e.jsx(ae,{className:"w-4 h-4 text-violet-500"})}),e.jsx("h3",{className:"font-bold text-slate-900",children:"Configurazione Simulazione"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Tempo Limite (minuti)"}),e.jsx("input",{type:"number",value:o.timeLimit,onChange:t=>n("timeLimit",t.target.value),className:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Punti Risposta Corretta"}),e.jsx("input",{type:"text",value:o.pointsCorrect,onChange:t=>n("pointsCorrect",t.target.value),className:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Punti Risposta Errata"}),e.jsx("input",{type:"text",value:o.pointsWrong,onChange:t=>n("pointsWrong",t.target.value),className:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Punti Non Risposta"}),e.jsx("input",{type:"text",value:o.pointsBlank,onChange:t=>n("pointsBlank",t.target.value),className:u})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-emerald-50 flex items-center justify-center",children:e.jsx(le,{className:"w-4 h-4 text-emerald-500"})}),e.jsx("h3",{className:"font-bold text-slate-900",children:"Criteri di Superamento"})]}),e.jsxs("label",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-100 cursor-pointer hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.useCustomPassThreshold,onChange:t=>n("useCustomPassThreshold",t.target.checked),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-slate-300 transition-all checked:border-[#00B1FF] checked:bg-[#00B1FF]"}),e.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100",children:e.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 14 14",fill:"none",children:e.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Abilita Soglia di Superamento"}),e.jsx("div",{className:"text-sm text-slate-500",children:`Se attivo, il sistema calcolerÃ  se l'utente Ã¨ "Idoneo" o "Non Idoneo"`})]})]}),o.useCustomPassThreshold&&e.jsxs("div",{className:"mt-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Minimo Risposte Corrette"}),e.jsx("input",{type:"number",min:"0",value:o.minCorrectForPass,onChange:t=>n("minCorrectForPass",t.target.value),placeholder:"Es. 18",className:u}),e.jsx("p",{className:"text-xs text-slate-400 mt-1.5",children:"Numero minimo di risposte esatte per ottenere l'idoneitÃ ."})]})]}),x&&y.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-amber-50 flex items-center justify-center",children:e.jsx(ie,{className:"w-4 h-4 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:"Distribuzione Domande"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Definisci quante domande estrarre per materia"})]})]}),e.jsxs("div",{className:"px-3 py-1 rounded-full bg-[#00B1FF]/10 text-[#00B1FF] font-bold text-sm",children:[Object.values(o.subjectCounts).reduce((t,p)=>t+p,0)," totali"]})]}),e.jsx("div",{className:"bg-slate-50 rounded-xl border border-slate-100 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-100/50 text-slate-500 font-medium text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Materia"}),e.jsx("th",{className:"px-4 py-3 w-32 text-center",children:"N. Domande"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:y.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-4 py-3 text-slate-900 font-medium",children:t.name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",min:"0",value:o.subjectCounts[t.id]||0,onChange:p=>k(t.id,p.target.value),className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-center text-slate-900 focus:ring-2 focus:ring-[#00B1FF]/30 focus:border-[#00B1FF] outline-none transition-all"})})]},t.id))})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm",children:e.jsxs("label",{className:"flex items-center gap-4 cursor-pointer",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.isArchived,onChange:t=>n("isArchived",t.target.checked),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-slate-300 transition-all checked:border-orange-500 checked:bg-orange-500"}),e.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100",children:e.jsx(G,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-orange-50 flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Archivia Concorso"}),e.jsx("div",{className:"text-sm text-slate-500",children:"I concorsi archiviati non sono visibili agli utenti"})]})]})]})}),v&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-xl text-red-600 text-sm flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx($,{className:"w-4 h-4 text-red-500"})}),v]}),f&&e.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-xl text-emerald-600 text-sm flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0",children:e.jsx(oe,{className:"w-4 h-4 text-emerald-500"})}),f]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-white",children:[e.jsx("button",{type:"button",onClick:d,disabled:g,className:"px-5 py-2.5 text-slate-600 hover:text-slate-900 hover:bg-slate-100 font-medium rounded-xl transition-colors disabled:opacity-50",children:"Annulla"}),e.jsx("button",{type:"button",onClick:N,disabled:g,className:"px-6 py-2.5 bg-[#00B1FF] hover:bg-[#00a0e6] text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 transition-all disabled:opacity-50 flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 animate-spin"}),"Salvataggio..."]}):x?"Salva Modifiche":"Crea Concorso"})]})]})]})}function Ce(){var M;const m=V(),{visibleQuizzes:d,subjects:x,roles:o,loading:g,error:v,showArchived:f,setShowArchived:_,editingId:j,formData:n,formSaving:N,formError:w,formSuccess:y,startEdit:k,resetForm:u,updateFormField:t,saveQuiz:p,toggleArchive:S,getRoleTitle:c,getSubjectsForQuiz:B}=me(),[I,A]=l.useState(!1),[F,z]=l.useState({open:!1,quiz:null}),T=()=>{u(),A(!0)},E=a=>{k(a),A(!0)},R=async()=>{await p(),w||A(!1)},L=()=>{A(!1),u()},Q=[{key:"title",label:"Titolo",render:a=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:a.title}),a.year&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Anno ",a.year]})]})},{key:"role",label:"Ruolo",width:"150px",render:a=>{const P=a;return e.jsx("span",{className:"text-slate-400",children:c(P.role_id||null)})}},{key:"subjects",label:"Materie",width:"80px",align:"center",render:a=>{const P=B(a.id).length;return e.jsx("span",{className:"text-slate-400",children:P})}},{key:"questions",label:"Domande",width:"80px",align:"center",render:a=>e.jsx("span",{className:"text-slate-400",children:a.total_questions||0})},{key:"status",label:"Stato",width:"100px",render:a=>e.jsx(te,{label:a.is_archived?"Archiviato":"Attivo",variant:a.is_archived?"warning":"success"})}],O=a=>[{label:"Modifica",icon:"âœï¸",onClick:()=>E(a)},{label:"Gestisci Materie",icon:"ðŸ“š",onClick:()=>m(`/admin/quiz/materie?quiz=${a.id}`)},{label:"Regole Simulazione",icon:"âš™ï¸",onClick:()=>m(`/admin/rules?quiz=${a.id}`)},{label:a.is_archived?"Ripristina":"Archivia",icon:a.is_archived?"ðŸ“¤":"ðŸ“",onClick:()=>S(a)}];return e.jsxs(Y,{children:[e.jsx(Z,{title:"Concorsi",subtitle:"Gestisci i concorsi e le loro configurazioni",action:{label:"Nuovo Concorso",icon:"+",onClick:T}}),e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:a=>_(a.target.checked),className:"rounded bg-slate-800 border-slate-600"}),"Mostra archiviati"]}),e.jsxs("div",{className:"text-sm text-slate-500",children:[d.length," concors",d.length===1?"o":"i"]})]}),v&&e.jsx("div",{className:"mb-4 p-4 bg-rose-500/10 border border-rose-500/20 rounded-lg text-rose-400",children:v}),e.jsx(ee,{columns:Q,data:d,loading:g,rowKey:a=>a.id,onRowClick:E,rowActions:O,emptyState:e.jsx(se,{icon:"ðŸ†",title:"Nessun concorso",description:f?"Non ci sono concorsi archiviati.":"Non hai ancora creato nessun concorso.",action:f?void 0:{label:"Crea il primo concorso",onClick:T}})}),I&&e.jsx(ue,{isOpen:I,onClose:L,editingId:j,formData:n,formSaving:N,formError:w,formSuccess:y,roles:o,subjects:x,updateFormField:t,onSave:R}),e.jsx(ce,{open:F.open,onClose:()=>z({open:!1,quiz:null}),title:"Archiviare questo concorso?",description:`Il concorso "${(M=F.quiz)==null?void 0:M.title}" verrÃ  archiviato.`,confirmLabel:"Archivia",onConfirm:()=>{F.quiz&&S(F.quiz)}})]})}export{Ce as default};
