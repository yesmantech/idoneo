import{j as e}from"./framer-BdaCTGm4.js";import{b as v,u as w,r as a}from"./router-ClfHAwMg.js";import{s as x}from"./index-DBMi1b3R.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";import"./icons-DIoLbN6D.js";function C(){const{contestSlug:i,type:y}=v(),r=w(),[m,o]=a.useState(!0),[c,u]=a.useState(null),[l,f]=a.useState(!1),[t,h]=a.useState(null);a.useEffect(()=>{p()},[i]);const p=async()=>{o(!0);try{const{data:s,error:d}=await x.from("quizzes").select("*").eq("slug",i).maybeSingle();if(d)throw d;if(!s)throw new Error("Concorso non trovato.");const{data:n}=await x.from("quiz_subject_rules").select("question_count").eq("quiz_id",s.id),j=(n==null?void 0:n.reduce((g,N)=>g+N.question_count,0))||0;h({title:s.title,time_limit:s.time_limit||60,total_questions:j,points_correct:s.points_correct??1,points_wrong:s.points_wrong??-.25,points_blank:s.points_blank??0,is_official:s.is_official??!1}),f(!!s.is_official)}catch(s){console.error(s),u(s.message)}finally{o(!1)}},b=()=>{l&&r(`/quiz/${i}/official`)};return m?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})}):c?e.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:[e.jsx("h1",{className:"text-xl font-bold text-rose-600 mb-2",children:"Errore caricamento"}),e.jsx("p",{className:"text-slate-500",children:c})]}):t?e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 pb-20",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"text-sm font-medium",children:"Torna indietro"})]}),e.jsx("div",{className:"font-bold text-slate-900 truncate max-w-[200px] md:max-w-md",children:"Regole della simulazione"}),e.jsx("div",{className:"w-8"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-lg mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-900 rounded-3xl mx-auto flex items-center justify-center text-4xl mb-6 shadow-xl shadow-slate-200",children:"üöÄ"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Pronto a iniziare?"}),e.jsxs("p",{className:"text-slate-500",children:["Stai per avviare la simulazione ufficiale per ",e.jsx("strong",{children:t.title}),". Ecco le regole che dovrai seguire."]})]}),!t.is_official&&e.jsxs("div",{className:"w-full bg-rose-50 border border-rose-200 p-4 rounded-xl mb-6 flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-rose-800 text-sm font-bold",children:"Simulazione non disponibile"}),e.jsx("p",{className:"text-rose-700 text-xs",children:"Questa simulazione √® attualmente chiusa o in manutenzione."})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 shadow-sm mb-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6 border-b border-slate-100",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-2xl",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:t.time_limit}),e.jsx("div",{className:"text-xs uppercase font-bold text-slate-400 tracking-wider",children:"Minuti"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-2xl",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:t.total_questions}),e.jsx("div",{className:"text-xs uppercase font-bold text-slate-400 tracking-wider",children:"Domande"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 mb-4 uppercase tracking-wide",children:"Punteggi"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-sm",children:"‚úì"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Risposta Esatta"})]}),e.jsxs("span",{className:"font-bold text-emerald-600",children:["+",t.points_correct]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center text-rose-600 font-bold text-sm",children:"‚úï"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Risposta Errata"})]}),e.jsx("span",{className:"font-bold text-rose-600",children:t.points_wrong})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm",children:"-"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Risposta Omessa"})]}),e.jsx("span",{className:"font-bold text-slate-500",children:t.points_blank})]})]})]})]}),e.jsx("div",{className:"text-center text-xs text-slate-400 mb-8 px-8",children:"Il tempo inizier√† a scorrere non appena cliccherai sul pulsante qui sotto. Buona fortuna! üçÄ"}),e.jsx("button",{onClick:b,disabled:!l,className:"w-full py-4 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-2xl shadow-xl shadow-slate-900/20 hover:shadow-slate-900/40 hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l?"Inizia la prova":"Attualmente non disponibile"})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Impossibile caricare configurazione."})}export{C as default};
