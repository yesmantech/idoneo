import{j as e,A as o,m as x}from"./framer-CcO5Kjcw.js";import{u as A,r as i,L as y}from"./router-ClfHAwMg.js";import{a as L,u as T}from"./bandiService-CPkRW1ZN.js";import{B as C,a as m}from"./BandiEmptyState-DYesJ7Na.js";import{a as D}from"./BandoSkeleton-DvN1ofUN.js";import{u as E}from"./index-BcNl-kiB.js";import{R as P,r as z}from"./icons-Dvxa2Qho.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function G(){const b=A(),{user:n}=E(),[h,p]=i.useState([]),[k,l]=i.useState(!0),[s,u]=i.useState("attivi");i.useEffect(()=>{n?N():l(!1)},[n]);const N=async()=>{l(!0);const t=await L();p(t),l(!1)},r=async t=>{await T(t)&&p(S=>S.filter(B=>B.id!==t))},g=new Date,v=h.filter(t=>new Date(t.deadline)>g),d=h.filter(t=>new Date(t.deadline)<=g),c=[...v].sort((t,a)=>new Date(t.deadline).getTime()-new Date(a.deadline).getTime()),j=c.filter(t=>(t.days_remaining??0)<=7),f=c.filter(t=>(t.days_remaining??0)>7),w=s==="attivi"?c:d;return n?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-24",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 sticky top-0 z-30 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>b(-1),className:"p-2 -ml-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(P,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"I Miei Bandi"})]}),e.jsx(y,{to:"/bandi/notifications",className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-800 rounded-2xl",children:[e.jsxs("button",{onClick:()=>u("attivi"),className:`flex-1 py-2.5 rounded-xl text-sm font-medium transition-colors ${s==="attivi"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:["Attivi (",v.length,")"]}),e.jsxs("button",{onClick:()=>u("chiusi"),className:`flex-1 py-2.5 rounded-xl text-sm font-medium transition-colors ${s==="chiusi"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:["Chiusi (",d.length,")"]})]})})]}),e.jsx("div",{className:"px-4 py-4",children:k?e.jsx(D,{count:4}):w.length===0?e.jsx(C,{type:"no-saved"}):e.jsxs("div",{className:"space-y-6",children:[s==="attivi"&&j.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400 uppercase tracking-wide mb-3 flex items-center gap-2",children:"ðŸ”¥ In scadenza questa settimana"}),e.jsx("div",{className:"space-y-3",children:e.jsx(o,{mode:"popLayout",children:j.map((t,a)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:a*.05},layout:!0,children:e.jsx(m,{bando:t,isSaved:!0,onSaveToggle:()=>r(t.id)})},t.id))})})]}),s==="attivi"&&f.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-3",children:"Prossimamente"}),e.jsx("div",{className:"space-y-3",children:e.jsx(o,{mode:"popLayout",children:f.map((t,a)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:a*.05},layout:!0,children:e.jsx(m,{bando:t,isSaved:!0,onSaveToggle:()=>r(t.id)})},t.id))})})]}),s==="chiusi"&&e.jsx("div",{className:"space-y-3",children:e.jsx(o,{mode:"popLayout",children:d.map((t,a)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:a*.05},layout:!0,children:e.jsx(m,{bando:t,isSaved:!0,onSaveToggle:()=>r(t.id)})},t.id))})})]})})]}):e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Accedi per salvare i bandi"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Crea un account per salvare i bandi e ricevere notifiche."}),e.jsx(y,{to:"/login",className:"text-emerald-500 font-medium",children:"Accedi"})]})})}export{G as default};
