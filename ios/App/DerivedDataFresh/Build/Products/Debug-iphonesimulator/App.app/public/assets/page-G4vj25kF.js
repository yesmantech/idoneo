const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/offlineService-CsdT_UCs.js","assets/index-Z19V86or.js","assets/framer-CcO5Kjcw.js","assets/router-ClfHAwMg.js","assets/react-vendor-B--z-fyW.js","assets/supabase-CIvuJI4W.js","assets/icons-Dvxa2Qho.js","assets/index-qViPT868.css"])))=>i.map(i=>d[i]);
import{s as w,j as D,h as I,b as R,u as z,a as $,k as P,m as T,_ as M}from"./index-Z19V86or.js";import{j as e}from"./framer-CcO5Kjcw.js";import{r as g,L as u,R as m}from"./router-ClfHAwMg.js";import{x as L,aL as U,b as C,l as f,j as p,I as O,a as j,B as H,H as W,V as G,at as Z,a7 as J,aM as F,o as S,F as Y,T as K,i as V,y as Q,m as X,O as q,Q as ee}from"./icons-Dvxa2Qho.js";import{S as re}from"./SEOHead-B7u-rzTH.js";import{d as te}from"./bandiService-BZw1T8K1.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function ae({post:r}){return e.jsxs(u,{to:`/blog/${r.slug}`,className:"block relative overflow-hidden rounded-[28px] lg:rounded-[32px] group shadow-soft border border-[var(--card-border)] transition-all duration-700 hover:shadow-hover",style:{aspectRatio:"16 / 9"},children:[r.cover_image_url?e.jsx("img",{src:r.cover_image_url,alt:r.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110",loading:"eager",sizes:"(max-width: 768px) 100vw, 66vw"}):e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #00B1FF 0%, #0891B2 30%, #10B981 70%, #22C55E 100%)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"})]})}function se({post:r}){return e.jsx(u,{to:`/blog/${r.slug}`,className:"block relative overflow-hidden rounded-[20px] lg:rounded-[24px] group shadow-soft border border-[var(--card-border)] transition-all duration-500 hover:shadow-hover",style:{aspectRatio:"16 / 9"},children:r.cover_image_url?e.jsx("img",{src:r.cover_image_url,alt:r.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110",loading:"lazy",sizes:"(max-width: 768px) 100vw, 33vw"}):e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #0891B2 0%, #00B1FF 50%, #10B981 100%)"}})})}function le(){return e.jsx("section",{className:"px-4 md:px-8 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 animate-pulse rounded-[24px]",style:{aspectRatio:"16 / 9"}})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"bg-slate-200 animate-pulse rounded-[16px]",style:{aspectRatio:"16 / 9"}}),e.jsx("div",{className:"bg-slate-200 animate-pulse rounded-[16px]",style:{aspectRatio:"16 / 9"}})]})]})})})}function oe(){const[r,t]=g.useState([]),[l,s]=g.useState(!0);if(g.useEffect(()=>{(async()=>{try{const{data:n}=await w.from("blog_posts").select("id, slug, title, subtitle, cover_image_url, category:blog_categories(name)").eq("status","published").order("is_featured",{ascending:!1}).order("published_at",{ascending:!1}).limit(5);n&&t(n)}catch(n){console.error("Failed to fetch blog posts:",n)}finally{s(!1)}})()},[]),l)return e.jsx(le,{});if(r.length===0)return null;const o=r[0],a=r.slice(1,3);return e.jsx("section",{className:"px-4 py-6 md:py-10 pt-safe",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ae,{post:o})}),e.jsx("div",{className:"flex flex-col gap-4",children:a.map(i=>e.jsx(se,{post:i},i.id))})]})})})}function ie({items:r=[]}){const{open:t}=D(),l=()=>{I(),R.track("search_used",{context:"homepage_trigger"}),t()};return e.jsx("div",{className:"w-full","data-onboarding":"search",children:e.jsxs("div",{onClick:l,className:"relative cursor-pointer group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-5 lg:pl-6 flex items-center pointer-events-none",children:e.jsx(L,{className:"w-5 h-5 lg:w-6 lg:h-6 text-slate-400 group-hover:text-[#00B1FF] transition-colors"})}),e.jsx("div",{className:`w-full h-[52px] lg:h-[60px] pl-14 lg:pl-16 pr-5 bg-[var(--card)] 
                               text-[15px] lg:text-base font-medium text-[var(--foreground)] opacity-50 flex items-center
                               shadow-soft border border-[var(--card-border)] rounded-[26px] lg:rounded-[30px]
                               group-hover:border-[#00B1FF]/30 group-hover:shadow-lg group-hover:shadow-[#00B1FF]/5 transition-all duration-200`,children:"Cerca concorso..."}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 hidden lg:flex items-center gap-1.5 px-2.5 py-1.5 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight group-hover:border-[#00B1FF]/20 group-hover:bg-[#00B1FF]/5 transition-all",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"K"})]})]})})}function ne({contest:r,index:t=0}){const l=(n,d)=>{const c=n.toLowerCase();if(c.includes("carabinieri"))return{Icon:j,gradient:"from-[#4F8CFF] via-[#3B7BF7] to-[#2563EB]",glow:"rgba(59, 130, 246, 0.4)"};if(c.includes("polizia"))return{Icon:j,gradient:"from-[#38BDF8] via-[#0EA5E9] to-[#0284C7]",glow:"rgba(14, 165, 233, 0.4)"};if(c.includes("finanza")||c.includes("guardia"))return{Icon:j,gradient:"from-[#FCD34D] via-[#F59E0B] to-[#D97706]",glow:"rgba(245, 158, 11, 0.4)"};if(c.includes("inps")||c.includes("entrate")||c.includes("agenzia"))return{Icon:H,gradient:"from-[#94A3B8] via-[#64748B] to-[#475569]",glow:"rgba(100, 116, 139, 0.35)"};if(c.includes("sanità")||c.includes("infermier"))return{Icon:W,gradient:"from-[#FDA4AF] via-[#F43F5E] to-[#E11D48]",glow:"rgba(244, 63, 94, 0.4)"};if(c.includes("scuola")||c.includes("docent"))return{Icon:G,gradient:"from-[#C4B5FD] via-[#A78BFA] to-[#7C3AED]",glow:"rgba(167, 139, 250, 0.4)"};if(c.includes("giustizia"))return{Icon:Z,gradient:"from-[#A5B4FC] via-[#818CF8] to-[#6366F1]",glow:"rgba(129, 140, 248, 0.4)"};const x=[{gradient:"from-[#67E8F9] via-[#22D3EE] to-[#06B6D4]",glow:"rgba(34, 211, 238, 0.4)"},{gradient:"from-[#86EFAC] via-[#4ADE80] to-[#22C55E]",glow:"rgba(74, 222, 128, 0.4)"},{gradient:"from-[#FDBA74] via-[#FB923C] to-[#F97316]",glow:"rgba(251, 146, 60, 0.4)"}];return{Icon:J,...x[d%x.length]}},{Icon:s,gradient:o,glow:a}=l(r.title,t),i=r.available_seats||null;return e.jsxs(u,{to:`/concorsi/${r.slug}`,className:"group relative bg-[var(--card)] shadow-soft transition-all duration-500 lg:duration-700 hover:-translate-y-1.5 flex flex-col overflow-hidden rounded-[28px] lg:rounded-[32px] border border-[var(--card-border)] h-full min-h-[220px]",style:{width:"clamp(180px, calc((100vw - 32px) * 0.48), 300px)"},children:[e.jsxs("div",{className:"relative overflow-hidden flex items-center justify-center bg-slate-100 dark:bg-slate-700 shrink-0",style:{aspectRatio:"2 / 1",width:"100%"},children:[r.home_banner_url?e.jsx("img",{src:r.home_banner_url,alt:r.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${o} opacity-90`}),e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgba(255,255,255,0.2) 0%, transparent 60%)"}}),e.jsx("div",{className:"relative z-10 flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-3",style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(255,255,255,0.25)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.4)",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsx(s,{className:"text-white w-8 h-8",strokeWidth:1.5})})]}),r.is_new&&e.jsx("div",{className:"absolute top-3.5 right-3.5 bg-white/95 backdrop-blur-md text-[#00B1FF] text-[10px] font-black px-2.5 py-1 rounded-full shadow-sm z-10 border border-[#00B1FF]/10 uppercase tracking-tight",children:"Nuovo"})]}),e.jsxs("div",{className:"flex flex-col justify-between bg-[var(--card)] relative z-10 p-4 lg:p-5 flex-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h3",{className:"font-extrabold text-[var(--foreground)] leading-[1.3] line-clamp-2 group-hover:text-[#00B1FF] transition-colors text-[14px] lg:text-[16px] tracking-tight",children:r.title}),r.subtitle&&e.jsx("p",{className:"text-[var(--foreground)] opacity-60 line-clamp-1 text-[11px] lg:text-[13px] font-medium group-hover:opacity-100 transition-opacity",children:r.subtitle})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 md:mt-auto pt-2",children:[r.year?e.jsx("div",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md",children:e.jsx("span",{className:"text-[var(--foreground)] opacity-50 font-bold text-[10px] lg:text-[11px] uppercase tracking-wider",children:r.year})}):e.jsx("div",{}),i&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-50 px-2.5 py-1 rounded-[10px] border border-emerald-100 shadow-sm shadow-emerald-900/5",children:[e.jsx(O,{className:"w-3 h-3 text-emerald-500"}),e.jsxs("span",{className:"text-emerald-700 font-black text-[10px] lg:text-[11px]",children:[i," posti"]})]})]})]})]})}function ce({title:r,contests:t}){const l=m.useRef(null),s=o=>{if(l.current){const a=o==="left"?-300:300;l.current.scrollBy({left:a,behavior:"smooth"})}};return!t||t.length===0?null:e.jsxs("div",{className:"max-w-7xl lg:mx-auto","data-onboarding":"concorsi",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 lg:px-8 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 rounded-[12px] bg-[#E0F2FE] dark:bg-cyan-900/30 flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[#00B1FF]",fill:"#00B1FF"})}),e.jsx("h2",{className:"text-[17px] lg:text-xl font-bold text-[var(--foreground)] leading-none",children:r})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>s("left"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(f,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})}),e.jsx("button",{onClick:()=>s("right"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})})]})]}),e.jsxs("div",{ref:l,className:"flex overflow-x-auto snap-x scroll-pl-4 lg:scroll-pl-8 scrollbar-hide py-2 -my-2 pl-4 lg:pl-8 gap-3 lg:gap-4 items-stretch",children:[t.map((o,a)=>e.jsx("div",{className:"snap-start flex-shrink-0",children:e.jsx(ne,{contest:o,index:a})},a)),e.jsx("div",{className:"min-w-[4px] lg:min-w-[16px] flex-shrink-0","aria-hidden":"true"})]})]})}function de({items:r}){const t=m.useRef(null),l=s=>{if(t.current){const o=s==="left"?-280:280;t.current.scrollBy({left:o,behavior:"smooth"})}};return!r||r.length===0?null:e.jsxs("div",{className:"max-w-7xl lg:mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 lg:px-8 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 rounded-[12px] bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center",children:e.jsx(F,{className:"w-4 h-4 lg:w-5 lg:h-5 text-violet-600"})}),e.jsx("h2",{className:"text-[17px] lg:text-xl font-bold text-[var(--foreground)] leading-none",children:"Usate di recente"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("left"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(f,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})}),e.jsx("button",{onClick:()=>l("right"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})})]})]}),e.jsxs("div",{ref:t,className:"flex overflow-x-auto snap-x scroll-pl-4 lg:scroll-pl-8 scrollbar-hide py-2 -my-2 pl-4 lg:pl-8 gap-3 lg:gap-4",children:[r.map((s,o)=>e.jsx("div",{className:"snap-start flex-shrink-0",children:e.jsx(ge,{item:s,index:o})},s.roleId)),e.jsx("div",{className:"min-w-[4px] lg:min-w-[16px] flex-shrink-0","aria-hidden":"true"})]})]})}function ge({item:r,index:t}){const l=(a,i)=>{const n=a.toLowerCase();if(n.includes("carabinieri"))return{gradient:"from-[#4F8CFF] via-[#3B7BF7] to-[#2563EB]",glow:"rgba(59, 130, 246, 0.4)"};if(n.includes("polizia"))return{gradient:"from-[#38BDF8] via-[#0EA5E9] to-[#0284C7]",glow:"rgba(14, 165, 233, 0.4)"};if(n.includes("finanza")||n.includes("guardia"))return{gradient:"from-[#FCD34D] via-[#F59E0B] to-[#D97706]",glow:"rgba(245, 158, 11, 0.4)"};const d=[{gradient:"from-[#67E8F9] via-[#22D3EE] to-[#06B6D4]",glow:"rgba(34, 211, 238, 0.4)"},{gradient:"from-[#86EFAC] via-[#4ADE80] to-[#22C55E]",glow:"rgba(74, 222, 128, 0.4)"},{gradient:"from-[#FDBA74] via-[#FB923C] to-[#F97316]",glow:"rgba(251, 146, 60, 0.4)"},{gradient:"from-[#C4B5FD] via-[#A78BFA] to-[#7C3AED]",glow:"rgba(167, 139, 250, 0.4)"}];return d[i%d.length]},{gradient:s}=l(r.categoryTitle,t),o=a=>{const i=Date.now()-new Date(a).getTime(),n=Math.floor(i/(1e3*60*60));if(n<1)return"Ora";if(n<24)return`${n}h fa`;const d=Math.floor(n/24);return d<7?`${d}g fa`:`${Math.floor(d/7)}s fa`};return e.jsxs(u,{to:`/concorsi/${r.categorySlug}/${r.roleSlug}`,className:"group relative bg-[var(--card)] shadow-soft transition-all duration-500 hover:-translate-y-1.5 flex flex-col overflow-hidden rounded-[28px] border border-[var(--card-border)]",style:{width:"clamp(180px, calc((100vw - 32px) * 0.48), 300px)",height:"clamp(210px, 24vh, 280px)"},children:[e.jsxs("div",{className:"relative overflow-hidden flex items-center justify-center",style:{aspectRatio:"2 / 1",width:"100%"},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-90`}),e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgba(255,255,255,0.2) 0%, transparent 60%)"}}),e.jsx("div",{className:"relative z-10 flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-3",style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(255,255,255,0.25)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.4)",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsx(F,{className:"text-white w-8 h-8",strokeWidth:1.5})}),e.jsxs("div",{className:"absolute top-3.5 right-3.5 bg-white/95 backdrop-blur-md text-slate-700 text-[10px] font-black px-2.5 py-1 rounded-full shadow-sm z-10 border border-slate-200/50",children:[r.attemptCount,"x"]})]}),e.jsxs("div",{className:"flex flex-col justify-between bg-[var(--card)] relative z-10 p-4 flex-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h3",{className:"font-extrabold text-[var(--foreground)] leading-[1.3] line-clamp-2 group-hover:text-brand-blue transition-colors text-[14px] tracking-tight",children:r.roleTitle}),e.jsx("p",{className:"text-[var(--foreground)] opacity-60 line-clamp-1 text-[11px] font-medium",children:r.categoryTitle})]}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold",children:o(r.lastAttemptAt)})]})})]})]})}function xe({bandi:r}){const t=m.useRef(null),l=s=>{if(t.current){const o=s==="left"?-300:300;t.current.scrollBy({left:o,behavior:"smooth"})}};return!r||r.length===0?null:e.jsxs("div",{className:"max-w-7xl lg:mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 lg:px-8 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 rounded-[12px] bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 lg:w-5 lg:h-5 text-rose-600",fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[17px] lg:text-xl font-bold text-[var(--foreground)] leading-none",children:"Bandi in scadenza"}),e.jsx("p",{className:"text-[11px] text-slate-400 font-medium mt-0.5",children:"Non perdere l'occasione!"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("left"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(f,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})}),e.jsx("button",{onClick:()=>l("right"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})})]})]}),e.jsxs("div",{ref:t,className:"flex overflow-x-auto snap-x scroll-pl-4 lg:scroll-pl-8 scrollbar-hide py-2 -my-2 pl-4 lg:pl-8 gap-3 lg:gap-4",children:[r.map(s=>e.jsx(he,{bando:s},s.id)),e.jsx("div",{className:"min-w-[4px] lg:min-w-[16px] flex-shrink-0","aria-hidden":"true"})]})]})}function he({bando:r}){var i;const t=r.days_remaining||0,l=t<=3,s=t<=7&&t>3,a=l?{bg:"bg-rose-500",text:"text-white",border:"border-rose-400",glow:"shadow-rose-500/30"}:s?{bg:"bg-amber-500",text:"text-white",border:"border-amber-400",glow:"shadow-amber-500/30"}:{bg:"bg-slate-100 dark:bg-slate-800",text:"text-slate-600 dark:text-slate-300",border:"border-slate-200 dark:border-slate-700",glow:""};return e.jsx(u,{to:`/bandi/${r.slug}`,className:"snap-start flex-shrink-0 group",children:e.jsxs("div",{className:`bg-[var(--card)] rounded-[24px] border ${l?"border-rose-200 dark:border-rose-800":"border-[var(--card-border)]"} shadow-soft overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg relative`,style:{width:"200px"},children:[l&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-rose-500 to-orange-500"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full ${a.bg} ${a.text} ${a.glow} shadow-lg mb-3`,children:[l?e.jsx(K,{className:"w-3 h-3"}):e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[11px] font-black",children:t===0?"OGGI!":t===1?"DOMANI!":`${t} giorni`})]}),e.jsx("p",{className:"text-[10px] font-bold text-brand-blue uppercase tracking-wider mb-1 truncate",children:((i=r.category)==null?void 0:i.name)||"Concorso"}),e.jsx("h3",{className:"text-[14px] font-black text-[var(--foreground)] leading-tight line-clamp-2 mb-3 group-hover:text-brand-blue transition-colors",children:r.title}),r.seats_total&&e.jsx("div",{className:"flex items-center gap-1.5 text-emerald-600",children:e.jsxs("span",{className:"text-[11px] font-bold",children:[r.seats_total," posti"]})})]})]})})}function ue({quizzes:r}){const t=m.useRef(null),l=s=>{if(t.current){const o=s==="left"?-280:280;t.current.scrollBy({left:o,behavior:"smooth"})}};return!r||r.length===0?null:e.jsxs("div",{className:"max-w-7xl lg:mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 lg:px-8 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 rounded-[12px] bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(V,{className:"w-4 h-4 lg:w-5 lg:h-5 text-emerald-600",strokeWidth:3})}),e.jsx("h2",{className:"text-[17px] lg:text-xl font-bold text-[var(--foreground)] leading-none",children:"Nuovi arrivi"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("left"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(f,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})}),e.jsx("button",{onClick:()=>l("right"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})})]})]}),e.jsxs("div",{ref:t,className:"flex overflow-x-auto snap-x scroll-pl-4 lg:scroll-pl-8 scrollbar-hide py-2 -my-2 pl-4 lg:pl-8 gap-3 lg:gap-4",children:[r.map((s,o)=>e.jsx(me,{quiz:s,index:o},s.id)),e.jsx("div",{className:"min-w-[4px] lg:min-w-[16px] flex-shrink-0","aria-hidden":"true"})]})]})}function me({quiz:r,index:t}){const l=["from-emerald-400 to-teal-500","from-cyan-400 to-blue-500","from-violet-400 to-purple-500","from-pink-400 to-rose-500","from-amber-400 to-orange-500"],s=l[t%l.length],o=Math.floor((Date.now()-new Date(r.createdAt).getTime())/(1e3*60*60*24)),a=o<=7;return e.jsx(u,{to:`/concorsi/${r.categorySlug}/${r.roleSlug}`,className:"snap-start flex-shrink-0 group",children:e.jsxs("div",{className:"bg-[var(--card)] rounded-[24px] border border-[var(--card-border)] shadow-soft overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg relative",style:{width:"180px"},children:[a&&e.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-[9px] font-black px-2 py-0.5 rounded-full shadow-lg shadow-emerald-500/30 uppercase tracking-wider flex items-center gap-1",children:[e.jsx(C,{className:"w-2.5 h-2.5"}),"NEW"]}),e.jsx("div",{className:`h-14 bg-gradient-to-br ${s} relative overflow-hidden`,children:e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLz48L3N2Zz4=')] opacity-50"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-brand-blue uppercase tracking-wider mb-1 truncate",children:r.categoryTitle}),e.jsx("h3",{className:"text-[13px] font-black text-[var(--foreground)] leading-tight line-clamp-2 mb-2 group-hover:text-brand-blue transition-colors",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-slate-400",children:[e.jsx(Q,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-medium",children:r.year})]}),o<=3&&e.jsx("span",{className:"text-[9px] font-bold text-emerald-600",children:o===0?"Oggi":o===1?"Ieri":`${o}g fa`})]})]})]})})}function fe({roles:r}){const t=m.useRef(null),l=s=>{if(t.current){const o=s==="left"?-280:280;t.current.scrollBy({left:o,behavior:"smooth"})}};return!r||r.length===0?null:e.jsxs("div",{className:"max-w-7xl lg:mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 lg:px-8 mb-4 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 rounded-[12px] bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 lg:w-5 lg:h-5 text-amber-600",fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[17px] lg:text-xl font-bold text-[var(--foreground)] leading-none",children:"I più popolari"}),e.jsx("p",{className:"text-[11px] text-slate-400 font-medium mt-0.5",children:"Scelti dalla community"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("left"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(f,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})}),e.jsx("button",{onClick:()=>l("right"),className:"w-9 h-9 lg:w-10 lg:h-10 rounded-full bg-[var(--card)] border border-[var(--card-border)] hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-center transition-all shadow-sm",children:e.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5 text-[var(--foreground)] opacity-60"})})]})]}),e.jsxs("div",{ref:t,className:"flex overflow-x-auto snap-x scroll-pl-4 lg:scroll-pl-8 scrollbar-hide py-2 -my-2 pl-4 lg:pl-8 gap-3 lg:gap-4",children:[r.map((s,o)=>e.jsx(pe,{role:s,rank:o+1},s.roleId)),e.jsx("div",{className:"min-w-[4px] lg:min-w-[16px] flex-shrink-0","aria-hidden":"true"})]})]})}function pe({role:r,rank:t}){const s=(()=>{switch(t){case 1:return{bg:"bg-gradient-to-br from-amber-400 to-yellow-500",text:"text-amber-900",shadow:"shadow-amber-400/40"};case 2:return{bg:"bg-gradient-to-br from-slate-300 to-slate-400",text:"text-slate-700",shadow:"shadow-slate-400/40"};case 3:return{bg:"bg-gradient-to-br from-amber-600 to-orange-700",text:"text-amber-100",shadow:"shadow-orange-600/40"};default:return{bg:"bg-slate-100 dark:bg-slate-800",text:"text-slate-600 dark:text-slate-300",shadow:""}}})();return e.jsx(u,{to:`/concorsi/${r.categorySlug}/${r.roleSlug}`,className:"snap-start flex-shrink-0 group",children:e.jsxs("div",{className:"bg-[var(--card)] rounded-[28px] lg:rounded-[32px] border border-[var(--card-border)] shadow-soft overflow-hidden transition-all duration-500 hover:-translate-y-1.5 hover:shadow-lg relative flex flex-col",style:{width:"clamp(180px, calc((100vw - 32px) * 0.48), 300px)",height:"clamp(210px, 24vh, 280px)"},children:[e.jsx("div",{className:`absolute top-3.5 left-3.5 z-10 w-9 h-9 rounded-full ${s.bg} ${s.shadow} shadow-lg flex items-center justify-center`,children:e.jsx("span",{className:`text-[16px] font-black ${s.text}`,children:t})}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500 via-orange-500 to-rose-500 shrink-0",style:{aspectRatio:"2 / 1",width:"100%"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgba(255,255,255,0.2) 0%, transparent 60%)"}}),e.jsx(q,{className:"absolute bottom-3 right-3 w-10 h-10 text-white/30",strokeWidth:1.5})]}),e.jsxs("div",{className:"flex flex-col justify-between p-4 lg:p-5 flex-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-[10px] lg:text-[11px] font-bold text-brand-blue uppercase tracking-wider truncate",children:r.categoryTitle}),e.jsx("h3",{className:"text-[14px] lg:text-[16px] font-extrabold text-[var(--foreground)] leading-[1.3] line-clamp-2 group-hover:text-brand-blue transition-colors tracking-tight",children:r.roleTitle})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 mt-4",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"text-[11px] font-medium",children:[r.totalAttempts.toLocaleString()," tentativi"]})]})]})]})})}async function be(r,t=5){if(!r)return[];try{const{data:l,error:s}=await w.from("quiz_attempts").select(`
                quiz:quizzes (
                    role:roles (
                        id, slug, title, is_archived,
                        category:categories (slug, title, is_archived)
                    )
                ),
                created_at
            `).eq("user_id",r).order("created_at",{ascending:!1}).limit(50);if(s)return console.error("Error fetching recently used:",s),[];const o=new Map;return(l||[]).forEach(a=>{var d,c,x;const i=(d=a.quiz)==null?void 0:d.role,n=i==null?void 0:i.category;!(i!=null&&i.id)||i.is_archived||n!=null&&n.is_archived||(o.has(i.id)?o.get(i.id).attemptCount++:o.set(i.id,{roleId:i.id,roleSlug:i.slug,roleTitle:i.title,categorySlug:((c=i.category)==null?void 0:c.slug)||"",categoryTitle:((x=i.category)==null?void 0:x.title)||"",lastAttemptAt:a.created_at,attemptCount:1}))}),Array.from(o.values()).slice(0,t)}catch(l){return console.error("fetchRecentlyUsed error:",l),[]}}async function ve(r=30,t=10){try{const l=new Date;l.setDate(l.getDate()-r);const{data:s,error:o}=await w.from("quizzes").select(`
                id, slug, title, year, created_at,
                role:roles (
                    slug, title,
                    category:categories (slug, title)
                )
            `).eq("is_archived",!1).gte("created_at",l.toISOString()).order("created_at",{ascending:!1}).limit(t);return o?(console.error("Error fetching new arrivals:",o),[]):(s||[]).map(a=>{var i,n,d,c,x,b;return{id:a.id,slug:a.slug,title:a.title,year:a.year,createdAt:a.created_at,roleSlug:((i=a.role)==null?void 0:i.slug)||"",roleTitle:((n=a.role)==null?void 0:n.title)||"",categorySlug:((c=(d=a.role)==null?void 0:d.category)==null?void 0:c.slug)||"",categoryTitle:((b=(x=a.role)==null?void 0:x.category)==null?void 0:b.title)||""}})}catch(l){return console.error("fetchNewArrivals error:",l),[]}}async function we(r=5){try{const{data:t,error:l}=await w.from("concorso_leaderboard").select(`
                quiz:quizzes (
                    role:roles (
                        id, slug, title, is_archived,
                        category:categories (slug, title, is_archived)
                    )
                )
            `).limit(500);if(l)return console.error("Error fetching popular roles:",l),[];const s=new Map;return(t||[]).forEach(o=>{var n;const a=(n=o.quiz)==null?void 0:n.role,i=a==null?void 0:a.category;!(a!=null&&a.id)||a.is_archived||i!=null&&i.is_archived||(s.has(a.id)||s.set(a.id,{role:a,count:0,users:new Set}),s.get(a.id).count++)}),Array.from(s.entries()).sort((o,a)=>a[1].count-o[1].count).slice(0,r).map(([o,{role:a,count:i,users:n}])=>{var d,c;return{roleId:a.id,roleSlug:a.slug,roleTitle:a.title,categorySlug:((d=a.category)==null?void 0:d.slug)||"",categoryTitle:((c=a.category)==null?void 0:c.title)||"",totalAttempts:i,uniqueUsers:n.size}})}catch(t){return console.error("fetchMostPopular error:",t),[]}}function _e(){const{profile:r,user:t}=z(),{hasCompletedOnboarding:l,startOnboarding:s}=$(),[o,a]=g.useState([]),[i,n]=g.useState([]),[d,c]=g.useState(!0),[x,b]=g.useState([]),[N,B]=g.useState([]),[y,_]=g.useState([]),[k,A]=g.useState([]);g.useEffect(()=>{if(!d&&!l){const h=setTimeout(()=>{s()},500);return()=>clearTimeout(h)}},[d,l,s]),g.useEffect(()=>{Promise.all([P(),T()]).then(([h,v])=>{a(h),n(v),c(!1)}),te(7,8).then(B),ve(30,10).then(_),we(5).then(A),M(async()=>{const{offlineService:h}=await import("./offlineService-CsdT_UCs.js");return{offlineService:h}},__vite__mapDeps([0,1,2,3,4,5,6,7])).then(({offlineService:h})=>{navigator.onLine&&h.syncAndClean().then(v=>{v>0&&console.log(`[Offline Sync] Synced ${v} attempts.`)})})},[]),g.useEffect(()=>{t!=null&&t.id&&be(t.id,5).then(b)},[t==null?void 0:t.id]);const E=o.slice(0,8);return e.jsxs("div",{className:"min-h-screen bg-[var(--background)] text-[var(--foreground)] pb-24 transition-colors duration-300",children:[e.jsx(re,{title:"Il miglior simulatore per i tuoi Concorsi Pubblici",description:"Preparati al meglio per i concorsi di Polizia, Carabinieri, Forze Armate e molto altro con quiz ufficiali e statistiche avanzate."}),e.jsxs("main",{className:"flex flex-col",children:[e.jsx("section",{children:e.jsx(oe,{})}),e.jsx("section",{className:"px-4 lg:px-8 -mt-6 lg:-mt-8 mb-6 lg:mb-8 max-w-7xl lg:mx-auto lg:w-full relative z-20",children:e.jsx(ie,{items:i})}),x.length>0&&e.jsx("section",{className:"mb-8 lg:mb-10",children:e.jsx(de,{items:x})}),N.length>0&&e.jsx("section",{className:"mb-8 lg:mb-10",children:e.jsx(xe,{bandi:N})}),e.jsx("section",{className:"mb-8 lg:mb-10",children:e.jsx(ce,{title:"Consigliati per te",contests:E})}),y.length>0&&e.jsx("section",{className:"mb-8 lg:mb-10",children:e.jsx(ue,{quizzes:y})}),k.length>0&&e.jsx("section",{className:"mb-8 lg:mb-10",children:e.jsx(fe,{roles:k})})]})]})}export{_e as default};
