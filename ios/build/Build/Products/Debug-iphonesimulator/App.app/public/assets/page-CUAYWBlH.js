import{j as e,m as n,A as D}from"./framer-BdaCTGm4.js";import{u as q,r as s,L as v}from"./router-ClfHAwMg.js";import{s as k,h as o,c as h,d as R}from"./index-BBBGEo7o.js";import{l as z,x as j,X as E,y as w,o as N,z as O}from"./icons-ByDj-hsa.js";import"./react-vendor-B--z-fyW.js";import"./supabase-CIvuJI4W.js";function H(){const y=q(),[F,C]=s.useState([]),[_,B]=s.useState([]),[S,I]=s.useState(!0),[l,g]=s.useState("all"),[r,c]=s.useState(""),[d,m]=s.useState(!1),p=s.useRef(null);s.useEffect(()=>{L()},[]);const L=async()=>{const{data:t}=await k.from("blog_categories").select("*").order("sort_order");t&&B(t);const{data:i}=await k.from("blog_posts").select(`
                *,
                category:blog_categories(*),
                author:blog_authors(*)
            `).eq("status","published").lte("published_at",new Date().toISOString()).order("published_at",{ascending:!1});i&&C(i),I(!1)},x=F.filter(t=>{const i=l==="all"||t.category_id===l,u=r.toLowerCase().trim(),A=!u||t.title.toLowerCase().includes(u)||t.subtitle&&t.subtitle.toLowerCase().includes(u);return i&&A}),b=t=>t?new Date(t).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}):"",f=t=>{R(),g(t)};if(S)return e.jsx("div",{className:"min-h-screen bg-[#F3F5F7] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#00B1FF] border-t-transparent rounded-full animate-spin"})});const a=x[0],P=x.slice(1);return e.jsxs("div",{className:"min-h-screen bg-[#F3F5F7] dark:bg-[var(--background)] transition-colors duration-300",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md border-b border-slate-200/50 dark:border-slate-700/50 pt-safe transition-colors",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-5 h-16 flex items-center justify-between",children:[!d&&e.jsxs("button",{onClick:()=>{o(),y("/")},className:"flex items-center gap-2 group p-1 -ml-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center group-hover:bg-slate-200 dark:group-hover:bg-slate-700 transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})}),e.jsx("span",{className:"font-bold text-[15px] text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white transition-colors",children:"Indietro"})]}),e.jsx("div",{className:h("flex items-center gap-2 transition-all duration-300",d?"flex-1":"w-10"),children:d?e.jsxs(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex-1 flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(j,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{ref:p,type:"text",placeholder:"Cerca un argomento...",value:r,onChange:t=>c(t.target.value),className:"w-full h-10 pl-10 pr-4 bg-slate-100 dark:bg-slate-800 rounded-2xl text-[15px] text-slate-900 dark:text-slate-100 placeholder:text-slate-400 border-none outline-none focus:ring-2 focus:ring-[#00B1FF]/20 transition-all font-medium",autoFocus:!0}),r&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-slate-300/50 dark:bg-slate-600/50 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-3 h-3 text-white"})})]}),e.jsx("button",{onClick:()=>{o(),m(!1),c("")},className:"text-slate-400 dark:text-slate-500 font-bold text-sm px-2",children:"Annulla"})]}):e.jsx("button",{onClick:()=>{o(),m(!0),setTimeout(()=>{var t;return(t=p.current)==null?void 0:t.focus()},100)},className:"w-10 h-10 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 flex items-center justify-center transition-colors",children:e.jsx(j,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-5 py-8",children:[!d&&e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-[var(--foreground)] tracking-tight",children:"Blog di Idoneo"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium mt-1",children:"Guide, consigli e novitÃ  sui concorsi."})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-8 scrollbar-hide -mx-5 px-5",children:[e.jsx("button",{onClick:()=>f("all"),className:h("px-5 py-2.5 rounded-full text-[14px] font-bold whitespace-nowrap transition-all shadow-sm",l==="all"?"bg-[#00B1FF] text-white":"bg-white dark:bg-[var(--card)] text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 border border-slate-200/50 dark:border-slate-800"),children:"Tutti"}),_.map(t=>e.jsxs("button",{onClick:()=>f(t.id),className:h("px-5 py-2.5 rounded-full text-[14px] font-bold whitespace-nowrap transition-all shadow-sm flex items-center gap-2",l===t.id?"bg-[#00B1FF] text-white":"bg-white dark:bg-[var(--card)] text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 border border-slate-200/50 dark:border-slate-800"),children:[t.icon&&e.jsx("span",{children:t.icon}),t.name]},t.id))]}),e.jsx(D,{mode:"wait",children:x.length>0?e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[a&&l==="all"&&!r&&e.jsx(v,{to:`/blog/${a.slug}`,onClick:()=>o(),className:"block group bg-white dark:bg-[var(--card)] rounded-[32px] p-4 lg:p-6 shadow-soft hover:shadow-card transition-all relative overflow-hidden active:scale-[0.98] border border-transparent dark:border-slate-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[a.cover_image_url&&e.jsx("div",{className:"w-full md:w-2/5 aspect-[4/3] md:aspect-square overflow-hidden rounded-[24px] bg-slate-50 dark:bg-slate-800 shrink-0",children:e.jsx("img",{src:a.cover_image_url,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}),e.jsxs("div",{className:"flex flex-col justify-center flex-1 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-[#00B1FF]/10 dark:bg-[#00B1FF]/20 text-[#00B1FF] dark:text-sky-400 rounded-full text-[11px] font-black uppercase tracking-wider",children:"In evidenza"}),a.category&&e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 rounded-full text-[11px] font-black uppercase tracking-wider",children:a.category.name})]}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-black text-slate-900 dark:text-[var(--foreground)] leading-[1.1] mb-4 group-hover:text-[#00B1FF] dark:group-hover:text-[#00B1FF] transition-colors line-clamp-3",children:a.title}),a.subtitle&&e.jsx("p",{className:"text-[15px] lg:text-[16px] text-slate-500 dark:text-slate-400 font-medium leading-relaxed line-clamp-2 mb-6",children:a.subtitle}),e.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 dark:text-slate-500 text-xs font-bold uppercase tracking-wider leading-none",children:[e.jsx(w,{className:"w-3.5 h-3.5"}),b(a.published_at)]}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 dark:text-slate-500 text-xs font-bold uppercase tracking-wider leading-none",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),a.reading_time_minutes," min"]})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00B1FF] flex items-center justify-center text-white scale-90 group-hover:scale-100 transition-transform",children:e.jsx(O,{className:"w-5 h-5"})})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:(l==="all"&&!r?P:x).map((t,i)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},children:e.jsxs(v,{to:`/blog/${t.slug}`,onClick:()=>o(),className:"block group bg-white dark:bg-[var(--card)] rounded-[32px] p-3.5 shadow-soft hover:shadow-card transition-all active:scale-[0.98] h-full border border-transparent dark:border-slate-800",children:[t.cover_image_url&&e.jsx("div",{className:"aspect-[16/10] overflow-hidden rounded-[24px] mb-4 bg-slate-50 dark:bg-slate-800",children:e.jsx("img",{src:t.cover_image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}),e.jsxs("div",{className:"px-1.5 pb-2",children:[t.category&&e.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-[#00B1FF] dark:text-sky-400 mb-2",children:t.category.name}),e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-[var(--foreground)] leading-tight mb-2 group-hover:text-[#00B1FF] dark:group-hover:text-[#00B1FF] transition-colors line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-wider",children:[e.jsx(w,{className:"w-3.5 h-3.5"}),b(t.published_at)]}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-wider",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),t.reading_time_minutes," MIN"]})]})]})]})},t.id))})]},l+r):e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-[var(--card)] rounded-[32px] py-16 px-6 text-center shadow-soft",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#F3F5F7] dark:bg-slate-800 flex items-center justify-center mx-auto mb-6 text-4xl",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-[var(--foreground)] mb-2",children:"Articoli non trovati"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium max-w-xs mx-auto",children:"Prova a cambiare categoria o a cercare qualcos'altro."}),e.jsx("button",{onClick:()=>{o(),g("all"),c(""),m(!1)},className:"mt-8 px-8 py-3 bg-[#00B1FF] text-white rounded-full font-bold shadow-lg shadow-[#00B1FF]/30 active:scale-95 transition-all",children:"Mostra tutti"})]})})]}),e.jsx("div",{className:"pb-32 lg:pb-12"})]})}export{H as default};
